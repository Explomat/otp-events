{"version":3,"sources":["ui/utils/createRemoteActions.js","ui/utils/toBoolean.js","ui/utils/uuid.js","ui/pages/details-event/mock.js","ui/pages/details-event/eventDetailsActions.js","ui/pages/home/filters/filtersActions.js","utils/uuid.js","servers.js","config.js","ui/pages/event/Event.js","ui/pages/event/index.js","store/index.js","ui/pages/event/eventActions.js","ui/pages/home/homeActions.js","ui/pages/home/event/Event.js","ui/components/search-bar/SearchBar.js","ui/pages/home/filters/index.js","ui/pages/home/index.js","ui/enhancers/lazyLoad.js","ui/routes/index.js","ui/app.js","index.js","ui/pages/home/filters/reducer.js","ui/pages/home/reducer.js","ui/pages/event/eventReducer.js","ui/pages/details-event/eventDetailsReducer.js","ui/rootReducer.js","store/configureStore.prod.js","ui/utils/formatDate.js","ui/pages/details-event/eventDetails.js","ui/pages/details-event/index.js"],"names":["createAction","action","_ref","Object","D_wt_projects_otp_events_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","concat","createRemoteActions","actions","prototype","toString","call","Array","isArray","Error","reduce","f","s","reducedAction","assign","__webpack_require__","d","__webpack_exports__","toBoolean","lodash__WEBPACK_IMPORTED_MODULE_0__","str","isBoolean","lut","i","events","id","cur_user_id","user_role","title","status_name","status_id","long_desc","img","max_person_count","start_date","finish_date","cost","city_id","city","subject_id","address","phone_number","email","event_admin_id","event_admin_fullname","event_admin_position","event_admin_avatar","like_count","collaborators","fullname","is_confirm","avatar","comments","user_id","user_fullname","date","message","cities","name","subjects","constants","objectSpread","EVENT_DETAILS_SET_STATUS","EVENT_DETAILS_LOADING","loading","isLoading","type","payload","getEventDetails","dispatch","path","url","createPath","server_name","action_name","fetch","then","resp","json","data","error","console","log","GET_EVENT_DETAILS_INITIAL_DATA_SUCCESS","catch","e","resolveEvent","getState","eventDetails","method","body","JSON","stringify","completeEvent","rejectEvent","respondParticipiant","RESPOND_EVENT_DETAILS_PARTICIPANT_SUCCESS","refuseParticipiant","REFUSE_EVENT_DETAILS_PARTICIPANT_SUCCESS","setParticipiantStatus","userId","isConfirm","accept","SET_EVENT_DETAILS_PARTICIPANT_STATUS_SUCCESS","removeComment","eventId","commentId","comment_id","REMOVE_EVENT_DETAILS_COMMENT_SUCCESS","addComment","ADD_EVENT_DETAILS_COMMENT_SUCCESS","editComment","EDIT_EVENT_DETAILS_COMMENT_SUCCESS","changeStatus","changeSearch","changePage","changeSubject","changeCity","changeAffilation","clearFields","search","_config__WEBPACK_IMPORTED_MODULE_0__","_homeActions__WEBPACK_IMPORTED_MODULE_1__","CHANGE_SEARCH","CHANGE_PAGE","CHANGE_STATUS","CHANGE_SUBJECT","CHANGE_CITY","CHANGE_AFFILATION","CLEAR_FIELDS","value","homeConstants","INITIAL_LOADING","filters","home","ui","status","page","affilation","subject","GET_INITIAL_DATA_SUCCESS","servers","Server","srv","_this","this","d0","Math","random","d1","d2","d3","uuid","addActions","_actions","getId","getName","getActions","wtCustomBaseUrl","TypeError","server","push","addServer","getServerId","serverName","actionName","_servers","filter","length","map","inputObj","serverId","keys","k","join","setDefaultLocale","Event","props","classCallCheck","possibleConstructorReturn","getPrototypeOf","state","isShowWarning","fileName","img_name","formRef","React","createRef","handleSave","bind","assertThisInitialized","onChangeRawStartDate","onChangeRawFinishDate","handleChangeFile","dateFormat","_this$props","short_desc","trim","match","getData","params","permalink","target","lastIndex","lastIndexOf","fname","substring","onChangeFileName","_isFormFilled","onSaveEvent","document","getElementById","setState","moment","isValid","onChangeStartDate","onChangeFinishDate","_this$props2","history","onChangeTitle","onChangeDescription","onChangeShortDescription","onChangeCity","onChangeAddress","onChangeSubject","onChangeMaxPersons","onChangeCost","prevFileId","react_default","a","createElement","Dimmer","active","inverted","Loader","className","Button","size","primary","icon","labelPosition","onClick","goBack","Icon","Message","attached","header","content","Form","encType","Field","readOnly","required","Label","Input","placeholder","onChange","TextArea","style","minHeight","Group","inline","es","locale","ru","selected","showTimeSelect","timeIntervals","timeFormat","timeCaption","placeholderText","onChangeRaw","disabledKeyboardNavigation","widths","Dropdown","upward","selection","options","fluid","warning","Component","withRouter","connect","event","ownProps","bindActionCreators","event_Event","module","exports","require","D_wt_projects_otp_events_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","NEW_EVENT_CHANGE_TITLE","NEW_EVENT_CHANGE_DESCRIPTION","NEW_EVENT_CHANGE_SHORT_DESCRIPTION","NEW_EVENT_CHANGE_START_DATE","NEW_EVENT_CHANGE_FINISH_DATE","NEW_EVENT_CHANGE_CITY","NEW_EVENT_CHANGE_SUBJECT","NEW_EVENT_CHANGE_MAX_PERSONS","NEW_EVENT_CHANGE_COST","NEW_EVENT_CHANGE_ADDRESS","NEW_EVENT_LOADING","NEW_EVENT_CHANGE_FILE_NAME","parseInt","isNaN","saveEvent","form","FormData","GET_EVENT_CREATE_SUCCESS","getInitialData","is_liked","handleLike","preventDefault","self","count","cur_person_count","comments_count","_this$state","isLikedClass","cs","mdl-button--colored","react_router_dom","defineProperty","to","background","marginBottom","Date","toLocaleDateString","year","month","day","hour","minute","Popup","trigger","backgroundImage","paddingRight","position","right","color","display","alignItems","marginRight","SearchBar","handleChange","handleSearch","nextProps","keyCode","onSearch","classNameInput","onKeyDown","children","_state$home","user","statuses","affilations","_statuses","roles","indexOf","onChangeStatus","onChangeSearch","onChangePage","activePage","onChangeAffilation","pagesCount","Grid","columns","Column","width","search_bar_SearchBar","floated","Pagination","firstItem","lastItem","prevItem","nextItem","totalPages","onPageChange","Home","loadData","len","home_filters","key","Segment","Header","Inline","positive","clear","LazyLoad","load","comp","forceUpdate","lazyLoad","dynamicImport","lazyLoad_LazyLoad","routes","component","exact","Promise","resolve","reject","default","App","route","react_router","store","configureStore","ReactDOM","render","app","initialState","reducer","combineReducers","arguments","undefined","_action$payload","c","text","toConsumableArray","filter_list","status_list","homeConstatns","uiReducer","commentsReducer","collaboratorsReducer","homeReducer","admins","createStore","reducers","applyMiddleware","thunkMiddleware","formateDate","EventDetails","comment","isEditCommentNow","handleChangeNewComment","handleSubmitNewComment","handleChangeComment","handleSubmitComment","handeShowEditCommentForm","handleCancelEditComment","_this$setState2","_ref2","_this$setState5","submitComment","submitNewComment","_this$props3","onResolveEvent","onRejectEvent","onCompleteEvent","buttons","isAdmin","borderRadius","cursor","as","floating","Fragment","Menu","Item","loadEvent","_this2","_this$props4","_this$props5","acceptParticipiantStatus","rejectParticipiantStatus","onRespondParticipiant","onRefuseParticipiant","styles","_adminButtons","formatDate","basic","Row","dividing","Card","Content","Image","src","Meta","Description","dangerouslySetInnerHTML","__html","extra","find","List","divided","verticalAlign","index","Or","with","Comment","reply","onSubmit","secondary","Avatar","Author","href","Metadata","Text","Actions","Action","disabled"],"mappings":"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","file":"static/js/main.263b532a.chunk.js","sourcesContent":["const createAction = action => {\r\n\treturn {\r\n\t\t[action]: action,\r\n\t\t[`${action}_SUCCESS`]: `${action}_SUCCESS`,\r\n\t\t[`${action}_FAILURE`]: `${action}_FAILURE`\r\n\t}\r\n}\r\n\r\nexport default function createRemoteActions(actions){\r\n\tif (Object.prototype.toString.call(actions) === '[object String]') {\r\n\t\tactions = [actions];\r\n\t}\r\n\r\n\tif (!Array.isArray(actions)){\r\n\t\tthrow new Error('Unknown input arguments!');\r\n\t}\r\n\r\n\treturn actions.reduce((f,s) => {\r\n\t\tconst reducedAction = createAction(s);\r\n\t\treturn Object.assign(f, reducedAction);\r\n\t}, {});\r\n}","import { isBoolean } from 'lodash';\r\n\r\nexport default function toBoolean(str){\r\n\tif (isBoolean(str)) return str;\r\n\r\n\tif (str === 'true') return true;\r\n\telse if (str === 'false') return false;\r\n\r\n\treturn false;\r\n}","const lut = [];\r\n\r\nfor (let i = 0; i < 256; i++) {\r\n\tlut[i] = (i < 16 ? '0' : '') + (i).toString(16);\r\n}\r\n\r\nexport default function uuid(){\r\n\tconst d0 = Math.random() * 0xffffffff | 0;\r\n\tconst d1 = Math.random() * 0xffffffff | 0;\r\n\tconst d2 = Math.random() * 0xffffffff | 0;\r\n\tconst d3 = Math.random() * 0xffffffff | 0;\r\n\t\r\n\treturn lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff] + '-' +\r\n\t\tlut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' + lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' +\r\n\t\tlut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] + lut[d2 >> 24 & 0xff] +\r\n\t\tlut[d3 & 0xff] + lut[d3 >> 8 & 0xff] + lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];\r\n}","import { find, findIndex } from 'lodash';\r\nimport uuid from '../../utils/uuid';\r\n\r\n\r\nconst events = [\r\n\t{\r\n\t\t\"id\": \"6668962976716051403\",\r\n\t\t\"cur_user_id\": \"6148914691236517121\",\r\n\t\t\"user_role\": \"event_admin\",\r\n\t\t\"title\": \"Речная прогулка по Москве реке\",\r\n\t\t\"status_name\": \"Плнируется\",\r\n\t\t\"status_id\": \"plan\",\r\n\t\t\"long_desc\": \"Круиз через весь&nbsp;центр Москвы на комфортабельном, двухпалубном теплаходе &quot;МАЭСТРО&quot;. В программе мероприятия шикарный ужин, музыкальная программа и завораживающий вид&nbsp; с борта теплохода на достопримечательности Москвы.\",\r\n\t\t\"img\": \"/download_file.html?file_id=6668970663716716859\",\r\n\t\t\"max_person_count\": \"25\",\r\n\t\t\"start_date\": \"Sat, 01 Jun 2019 16:00:00 +0300\",\r\n\t\t\"finish_date\": \"Sat, 01 Jun 2019 19:00:00 +0300\",\r\n\t\t\"cost\": \"150000\",\r\n\t\t\"city_id\": \"5667697629116916688\",\r\n\t\t\"city\": \"Москва\",\r\n\t\t\"subject_id\": \"Развлечение\",\r\n\t\t\"address\": \"г. Москва, Крымский Вал, 9\",\r\n\t\t\"phone_number\": \"84967281726\",\r\n\t\t\"email\": \"user_019@gmail.com\",\r\n\t\t\"event_admin_id\": \"6671630922937078440\",\r\n\t\t\"event_admin_fullname\": \"Антонова Елена Анатольевна\",\r\n\t\t\"event_admin_position\": \"Начальник отдела\",\r\n\t\t\"event_admin_avatar\": \"/download_file.html?file_id=6671631649276712429\",\r\n\t\t\"like_count\": \"3\",\r\n\t\t\"collaborators\": [\r\n\t\t{\r\n\t\t  \"id\": \"6671537774053763818\",\r\n\t\t  \"fullname\": \"Павленко Ирина Леонидовна\",\r\n\t\t  \"is_confirm\": \"true\",\r\n\t\t  \"avatar\": \"/download_file.html?file_id=6671538400859850742\"\r\n\t\t},\r\n\t\t{\r\n\t\t  \"id\": \"6671536515542115698\",\r\n\t\t  \"fullname\": \"Калугина Елена Руслановна\",\r\n\t\t  \"is_confirm\": \"true\",\r\n\t\t  \"avatar\": \"/download_file.html?file_id=6671537379586870665\"\r\n\t\t},\r\n\t\t{\r\n\t\t  \"id\": \"6670724707302122721\",\r\n\t\t  \"fullname\": \"Петров Петр Петрович\",\r\n\t\t  \"is_confirm\": \"true\",\r\n\t\t  \"avatar\": \"/download_file.html?file_id=6669106315989699280\"\r\n\t\t},\r\n\t\t{\r\n\t\t  \"id\": \"6148914691236517121\",\r\n\t\t  \"fullname\": \"Иванов Иван Иванович\",\r\n\t\t  \"is_confirm\": \"false\",\r\n\t\t  \"avatar\": \"/download_file.html?file_id=6671540961322951686\"\r\n\t\t}\r\n\t\t],\r\n\t\t\"comments\": [\r\n\t\t{\r\n\t\t  \"id\": \"6677220343771366295\",\r\n\t\t  \"user_id\": \"6148914691236517121\",\r\n\t\t  \"avatar\": \"/download_file.html?file_id=6671540961322951686\",\r\n\t\t  \"user_fullname\": \"Иванов Иван Иванович\",\r\n\t\t  \"date\": \"Sun, 07 Apr 2019 21:25:10 +0300\",\r\n\t\t  \"message\": \"fsfs\"\r\n\t\t}\r\n\t\t],\r\n\t\t\"cities\": [\r\n\t\t{\r\n\t\t  \"id\": \"5667697629116916643\",\r\n\t\t  \"name\": \"Абакан\"\r\n\t\t},\r\n\t\t{\r\n\t\t  \"id\": \"5667697629116916644\",\r\n\t\t  \"name\": \"Аксай\"\r\n\t\t},\r\n\t\t{\r\n\t\t  \"id\": \"5667697629116916645\",\r\n\t\t  \"name\": \"Актау\"\r\n\t\t},\r\n\t\t{\r\n\t\t  \"id\": \"5667697629116916646\",\r\n\t\t  \"name\": \"Актобе\"\r\n\t\t},\r\n\t\t{\r\n\t\t  \"id\": \"5667697629116916647\",\r\n\t\t  \"name\": \"Алматы\"\r\n\t\t},\r\n\t\t{\r\n\t\t  \"id\": \"5667697629116916648\",\r\n\t\t  \"name\": \"Архангельск\"\r\n\t\t},\r\n\t\t{\r\n\t\t  \"id\": \"5667697629116916649\",\r\n\t\t  \"name\": \"Астана\"\r\n\t\t}\r\n\t\t],\r\n\t\t\"subjects\": [\r\n\t\t\t\"Образование\",\r\n\t\t\t\"Спорт\",\r\n\t\t\t\"Здоровье\",\r\n\t\t\t\"Путешествия, туризм\",\r\n\t\t\t\"Культура\",\r\n\t\t\t\"Развлечение\"\r\n\t\t]\r\n\t}\r\n]\r\n\r\nconst data = events[0];\r\n\r\nexport function setParticipiantStatusMock(eventId, userId, isConfirm){\r\n\tconst event = find(events, { id: eventId });\r\n\tif (event){\r\n\t\tconst index = findIndex(event.collaborators, { id: userId });\r\n\t\tif (index !== -1){\r\n\t\t\tif (isConfirm){\r\n\t\t\t\tevent.collaborators[index].is_confirm = isConfirm;\r\n\t\t\t} else {\r\n\t\t\t\tevent.collaborators.splice(index, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function setCommentMock(eventId, commentId, message){\r\n\tconst event = find(events, { id: eventId });\r\n\tif (event){\r\n\t\tif (commentId !== null && commentId !== undefined) {\r\n\t\t\tconst comment = find(event.comments, { id: commentId });\r\n\t\t\tif (comment) {\r\n\t\t\t\tcomment.message = message;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst newComment = {\r\n\t\t\t\t\"id\": uuid(),\r\n\t\t\t\t\"user_id\": uuid(),\r\n\t\t\t\t\"avatar\": \"/download_file.html?file_id=6669106315989699280\",\r\n\t\t\t\t\"user_fullname\": \"Иванов Иван Иванович\",\r\n\t\t\t\t\"date\": new Date(),\r\n\t\t\t\t\"message\": message\r\n\t\t\t};\r\n\t\t\tevent.comments = event.comments.concat([newComment]);\r\n\t\t\treturn newComment;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function removeCommentMock(eventId, commentId){\r\n\tconst event = find(events, { id: eventId });\r\n\tif (event){\r\n\t\tconst index = findIndex(event.comments, { id: commentId });\r\n\t\tif (index !== -1){\r\n\t\t\tevent.comments.splice(index, 1);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default data;","import { url } from '../../../config';\r\nimport createRemoteActions from '../../utils/createRemoteActions';\r\nimport mock, { setParticipiantStatusMock, removeCommentMock, setCommentMock } from './mock';\r\n\r\nexport const constants = {\r\n\t...createRemoteActions([\r\n\t\t'GET_EVENT_DETAILS_INITIAL_DATA',\r\n\t\t'SET_EVENT_DETAILS_PARTICIPANT_STATUS',\r\n\t\t'REMOVE_EVENT_DETAILS_COMMENT',\r\n\t\t'ADD_EVENT_DETAILS_COMMENT',\r\n\t\t'EDIT_EVENT_DETAILS_COMMENT',\r\n\t\t'RESPOND_EVENT_DETAILS_PARTICIPANT',\r\n\t\t'REFUSE_EVENT_DETAILS_PARTICIPANT'\r\n\t]),\r\n\t'EVENT_DETAILS_SET_STATUS': 'EVENT_DETAILS_SET_STATUS',\r\n\t'EVENT_DETAILS_LOADING': 'EVENT_DETAILS_LOADING'\r\n}\r\n\r\nfunction loading(isLoading){\r\n\treturn {\r\n\t\ttype: constants.EVENT_DETAILS_LOADING,\r\n\t\tpayload: isLoading\r\n\t}\r\n}\r\n\r\nexport function getEventDetails(id){\r\n\treturn dispatch => {\r\n\t\tconst path = url.createPath({\r\n\t\t\tserver_name: 'events',\r\n\t\t\taction_name: 'EventData',\r\n\t\t\tid\r\n\t\t});\r\n\r\n\t\tdispatch(loading(true));\r\n\t\tfetch(path)\r\n\t\t.then(resp => {\r\n\t\t\treturn resp.json();\r\n\t\t})\r\n\t\t.then(data => {\r\n\t\t\tif (data.error){\r\n\t\t\t\t//dispatch(error(data.error));\r\n\t\t\t\tconsole.log(data.error);\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(loading(false));\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: constants.GET_EVENT_DETAILS_INITIAL_DATA_SUCCESS,\r\n\t\t\t\t\tpayload: data\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}).catch(e => {\r\n\t\t\t//dispatch(error(e.message));\r\n\t\t\tconsole.log(e.message);\r\n\t\t});\r\n\r\n\r\n\t\t\r\n\t\t/*dispatch(loading(true));\r\n\t\tsetTimeout(() => {\r\n\t\t\tdispatch(loading(false));\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: constants.GET_EVENT_DETAILS_INITIAL_DATA_SUCCESS,\r\n\t\t\t\tpayload: { ...mock }\r\n\t\t\t});\r\n\t\t}, 300);*/\r\n\t}\r\n}\r\n\r\nexport function resolveEvent(){\r\n\treturn (dispatch, getState) => {\r\n\t\tconst { eventDetails } = getState();\r\n\r\n\t\tconst path = url.createPath({\r\n\t\t\tserver_name: 'events',\r\n\t\t\taction_name: 'ResolveEvent'\r\n\t\t});\r\n\r\n\t\tfetch(path, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tid: eventDetails.id\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(resp => {\r\n\t\t\treturn resp.json();\r\n\t\t})\r\n\t\t.then(data => {\r\n\t\t\tif (data.error){\r\n\t\t\t\t//dispatch(error(data.error));\r\n\t\t\t\tconsole.log(data.error);\r\n\t\t\t} else {\r\n\t\t\t\t/*dispatch({\r\n\t\t\t\t\ttype: constants.RESOLVE_EVENT_DETAILS_SUCCESS,\r\n\t\t\t\t\tpayload: data.status_id\r\n\t\t\t\t});*/\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: constants.EVENT_DETAILS_SET_STATUS,\r\n\t\t\t\t\tpayload: data\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}).catch(e => {\r\n\t\t\t//dispatch(error(e.message));\r\n\t\t\tconsole.log(e.message);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function completeEvent(){\r\n\treturn (dispatch, getState) => {\r\n\t\tconst { eventDetails } = getState();\r\n\r\n\t\tconst path = url.createPath({\r\n\t\t\tserver_name: 'events',\r\n\t\t\taction_name: 'CompleteEvent'\r\n\t\t});\r\n\r\n\t\tfetch(path, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tid: eventDetails.id\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(resp => {\r\n\t\t\treturn resp.json();\r\n\t\t})\r\n\t\t.then(data => {\r\n\t\t\tif (data.error){\r\n\t\t\t\t//dispatch(error(data.error));\r\n\t\t\t\tconsole.log(data.error);\r\n\t\t\t} else {\r\n\t\t\t\t/*dispatch({\r\n\t\t\t\t\ttype: constants.REJECT_EVENT_DETAILS_SUCCESS,\r\n\t\t\t\t\tpayload: data\r\n\t\t\t\t});*/\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: constants.EVENT_DETAILS_SET_STATUS,\r\n\t\t\t\t\tpayload: data\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}).catch(e => {\r\n\t\t\t//dispatch(error(e.message));\r\n\t\t\tconsole.log(e.message);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function rejectEvent(){\r\n\treturn (dispatch, getState) => {\r\n\t\tconst { eventDetails } = getState();\r\n\r\n\t\tconst path = url.createPath({\r\n\t\t\tserver_name: 'events',\r\n\t\t\taction_name: 'RejectEvent'\r\n\t\t});\r\n\r\n\t\tfetch(path, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tid: eventDetails.id\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(resp => {\r\n\t\t\treturn resp.json();\r\n\t\t})\r\n\t\t.then(data => {\r\n\t\t\tif (data.error){\r\n\t\t\t\t//dispatch(error(data.error));\r\n\t\t\t\tconsole.log(data.error);\r\n\t\t\t} else {\r\n\t\t\t\t/*dispatch({\r\n\t\t\t\t\ttype: constants.REJECT_EVENT_DETAILS_SUCCESS,\r\n\t\t\t\t\tpayload: data\r\n\t\t\t\t});*/\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: constants.EVENT_DETAILS_SET_STATUS,\r\n\t\t\t\t\tpayload: data\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}).catch(e => {\r\n\t\t\t//dispatch(error(e.message));\r\n\t\t\tconsole.log(e.message);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function respondParticipiant() {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst { eventDetails } = getState();\r\n\r\n\t\tconst path = url.createPath({\r\n\t\t\tserver_name: 'events',\r\n\t\t\taction_name: 'NewParticipiant'\r\n\t\t});\r\n\r\n\t\tfetch(path, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tid: eventDetails.id\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(resp => {\r\n\t\t\treturn resp.json();\r\n\t\t})\r\n\t\t.then(data => {\r\n\t\t\tif (data.error){\r\n\t\t\t\t//dispatch(error(data.error));\r\n\t\t\t\tconsole.log(data.error);\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: constants.RESPOND_EVENT_DETAILS_PARTICIPANT_SUCCESS,\r\n\t\t\t\t\tpayload: data\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}).catch(e => {\r\n\t\t\t//dispatch(error(e.message));\r\n\t\t\tconsole.log(e.message);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function refuseParticipiant() {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst { eventDetails } = getState();\r\n\r\n\t\tconst path = url.createPath({\r\n\t\t\tserver_name: 'events',\r\n\t\t\taction_name: 'Refuse'\r\n\t\t});\r\n\r\n\t\tfetch(path, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tid: eventDetails.id\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(resp => {\r\n\t\t\treturn resp.json();\r\n\t\t})\r\n\t\t.then(data => {\r\n\t\t\tif (data.error){\r\n\t\t\t\t//dispatch(error(data.error));\r\n\t\t\t\tconsole.log(data.error);\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: constants.REFUSE_EVENT_DETAILS_PARTICIPANT_SUCCESS,\r\n\t\t\t\t\tpayload: data\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}).catch(e => {\r\n\t\t\t//dispatch(error(e.message));\r\n\t\t\tconsole.log(e.message);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function setParticipiantStatus(userId, isConfirm){\r\n\treturn (dispatch, getState) => {\r\n\t\tconst { eventDetails } = getState();\r\n\r\n\t\tconst path = url.createPath({\r\n\t\t\tserver_name: 'events',\r\n\t\t\taction_name: 'ParticipiantStatus'\r\n\t\t});\r\n\r\n\t\tfetch(path, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tid: eventDetails.id,\r\n\t\t\t\tuser_id: userId,\r\n\t\t\t\taccept: isConfirm\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(resp => {\r\n\t\t\treturn resp.json();\r\n\t\t})\r\n\t\t.then(data => {\r\n\t\t\tif (data.error){\r\n\t\t\t\t//dispatch(error(data.error));\r\n\t\t\t\tconsole.error(data.error);\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: constants.SET_EVENT_DETAILS_PARTICIPANT_STATUS_SUCCESS,\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tuserId,\r\n\t\t\t\t\t\tisConfirm\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}).catch(e => {\r\n\t\t\t//dispatch(error(e.message));\r\n\t\t\tconsole.error(e.message);\r\n\t\t});\r\n\r\n\t\t/*const { eventDetails } = getState();\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetParticipiantStatusMock(eventDetails.id, userId, isConfirm);\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: constants.SET_EVENT_DETAILS_PARTICIPANT_STATUS_SUCCESS,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tuserId,\r\n\t\t\t\t\tisConfirm\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 100)*/\r\n\t}\r\n}\r\n\r\nexport function removeComment(eventId, commentId){\r\n\treturn (dispatch) => {\r\n\t\tconst path = url.createPath({\r\n\t\t\tserver_name: 'events',\r\n\t\t\taction_name: 'RemoveComment'\r\n\t\t});\r\n\r\n\t\tfetch(path, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tid: eventId,\r\n\t\t\t\tcomment_id: commentId\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(resp => {\r\n\t\t\treturn resp.json();\r\n\t\t})\r\n\t\t.then(data => {\r\n\t\t\tif (data.error){\r\n\t\t\t\t//dispatch(error(data.error));\r\n\t\t\t\tconsole.error(data.error);\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: constants.REMOVE_EVENT_DETAILS_COMMENT_SUCCESS,\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\teventId,\r\n\t\t\t\t\t\tcommentId\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}).catch(e => {\r\n\t\t\t//dispatch(error(e.message));\r\n\t\t\tconsole.error(e.message);\r\n\t\t});\r\n\t\t/*setTimeout(() => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: constants.REMOVE_EVENT_DETAILS_COMMENT_SUCCESS,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\teventId,\r\n\t\t\t\t\tcommentId\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tremoveCommentMock(eventId, commentId);\r\n\t\t});*/\r\n\t}\r\n}\r\n\r\nexport function addComment(eventId, message) {\r\n\treturn (dispatch) => {\r\n\t\tconst path = url.createPath({\r\n\t\t\tserver_name: 'events',\r\n\t\t\taction_name: 'AddComment'\r\n\t\t});\r\n\r\n\t\tfetch(path, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tid: eventId,\r\n\t\t\t\tmessage\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(resp => {\r\n\t\t\treturn resp.json();\r\n\t\t})\r\n\t\t.then(data => {\r\n\t\t\tif (data.error){\r\n\t\t\t\t//dispatch(error(data.error));\r\n\t\t\t\tconsole.error(data.error);\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: constants.ADD_EVENT_DETAILS_COMMENT_SUCCESS,\r\n\t\t\t\t\tpayload: data\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}).catch(e => {\r\n\t\t\t//dispatch(error(e.message));\r\n\t\t\tconsole.error(e.message);\r\n\t\t});\r\n\t\t/*setTimeout(() => {\r\n\t\t\tconst comment = setCommentMock(eventId, null, message);\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: constants.ADD_EVENT_DETAILS_COMMENT_SUCCESS,\r\n\t\t\t\tpayload: comment\r\n\t\t\t});\r\n\t\t});*/\r\n\t}\r\n}\r\n\r\nexport function editComment(eventId, commentId, message) {\r\n\treturn (dispatch) => {\r\n\t\tconst path = url.createPath({\r\n\t\t\tserver_name: 'events',\r\n\t\t\taction_name: 'AddComment'\r\n\t\t});\r\n\r\n\t\tfetch(path, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\tid: eventId,\r\n\t\t\t\t\tcomment_id: commentId,\r\n\t\t\t\t\tmessage\r\n\t\t\t\t})\r\n\t\t})\r\n\t\t.then(resp => {\r\n\t\t\treturn resp.json();\r\n\t\t})\r\n\t\t.then(data => {\r\n\t\t\tif (data.error){\r\n\t\t\t\t//dispatch(error(data.error));\r\n\t\t\t\tconsole.error(data.error);\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: constants.EDIT_EVENT_DETAILS_COMMENT_SUCCESS,\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tcommentId,\r\n\t\t\t\t\t\tmessage\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}).catch(e => {\r\n\t\t\t//dispatch(error(e.message));\r\n\t\t\tconsole.error(e.message);\r\n\t\t});\r\n\t\t/*setTimeout(() => {\r\n\t\t\tsetCommentMock(eventId, commentId, message);\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: constants.EDIT_EVENT_DETAILS_COMMENT_SUCCESS,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tcommentId,\r\n\t\t\t\t\tmessage\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});*/\r\n\t}\r\n}","import { url } from '../../../../config';\r\nimport { constants as homeConstants } from '../homeActions';\r\n\r\nexport const constants = {\r\n\t'CHANGE_SEARCH': 'CHANGE_SEARCH',\r\n\t'CHANGE_PAGE': 'CHANGE_PAGE',\r\n\t'CHANGE_STATUS': 'CHANGE_STATUS',\r\n\t'CHANGE_SUBJECT': 'CHANGE_SUBJECT',\r\n\t'CHANGE_CITY': 'CHANGE_CITY',\r\n\t'CHANGE_AFFILATION': 'CHANGE_AFFILATION',\r\n\t'CLEAR_FIELDS': 'CLEAR_FIELDS'\r\n}\r\n\r\nexport const statuses = {\r\n\tall: 'Выберите статус',\r\n\tactive: 'Активные',\r\n\tplan: 'Планируются',\r\n\tcompleted: 'Завершены'\r\n}\r\n\r\n\r\nexport function changeStatus(value){\r\n\treturn {\r\n\t\ttype: constants.CHANGE_STATUS,\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport function changeSearch(value){\r\n\treturn {\r\n\t\ttype: constants.CHANGE_SEARCH,\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport function changePage(value){\r\n\treturn {\r\n\t\ttype: constants.CHANGE_PAGE,\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport function changeSubject(value){\r\n\treturn {\r\n\t\ttype: constants.CHANGE_SUBJECT,\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport function changeCity(value){\r\n\treturn {\r\n\t\ttype: constants.CHANGE_CITY,\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport function changeAffilation(value){\r\n\treturn {\r\n\t\ttype: constants.CHANGE_AFFILATION,\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport function clearFields(){\r\n\treturn {\r\n\t\ttype: constants.CLEAR_FIELDS\r\n\t}\r\n}\r\n\r\n\r\nfunction loading(isLoading){\r\n\treturn {\r\n\t\ttype: homeConstants.INITIAL_LOADING,\r\n\t\tpayload: isLoading\r\n\t}\r\n}\r\n\r\nexport function search(){\r\n\treturn (dispatch, getState) => {\r\n\t\tconst { home } = getState();\r\n\t\tconst filters = home.ui.filters;\r\n\r\n\t\tconst path = url.createPath({\r\n\t\t\tserver_name: 'events',\r\n\t\t\taction_name: 'Data',\r\n\t\t\tstatus: filters.status,\r\n\t\t\tsearch: filters.search,\r\n\t\t\tpage: filters.page,\r\n\t\t\tcity: filters.city,\r\n\t\t\taffilation: filters.affilation,\r\n\t\t\tsubject: filters.subject\r\n\r\n\t\t});\r\n\r\n\t\tdispatch(loading(true));\r\n\t\tfetch(path)\r\n\t\t.then(resp => {\r\n\t\t\treturn resp.json();\r\n\t\t})\r\n\t\t.then(data => {\r\n\t\t\tif (data.error){\r\n\t\t\t\t//dispatch(error(data.error));\r\n\t\t\t\tconsole.error(data.error);\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(loading(false));\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: homeConstants.GET_INITIAL_DATA_SUCCESS,\r\n\t\t\t\t\tpayload: data\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(e => {\r\n\t\t\t//dispatch(error(e.message));\r\n\t\t\tconsole.error(e.message);\r\n\t\t});\r\n\r\n\t\t/*setTimeout((search, status) => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: constants.FILTER_EVENTS_SUCCESS,\r\n\t\t\t\tpayload: []\r\n\t\t\t})\r\n\t\t}, 1000);*/\r\n\t};\r\n}","const lut = [];\r\n\r\nfor (let i = 0; i < 256; i++) {\r\n\tlut[i] = (i < 16 ? '0' : '') + (i).toString(16);\r\n}\r\n\r\nexport default function uuid(){\r\n\tconst d0 = Math.random() * 0xffffffff | 0;\r\n\tconst d1 = Math.random() * 0xffffffff | 0;\r\n\tconst d2 = Math.random() * 0xffffffff | 0;\r\n\tconst d3 = Math.random() * 0xffffffff | 0;\r\n\t\r\n\treturn lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff] + '-' +\r\n\t\tlut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' + lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' +\r\n\t\tlut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] + lut[d2 >> 24 & 0xff] +\r\n\t\tlut[d3 & 0xff] + lut[d3 >> 8 & 0xff] + lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];\r\n}","import uuid from './utils/uuid';\r\n\r\nconst servers = [];\r\n\r\n/*\r\n\tsrv: {id: 1, name: 'test'}\r\n*/\r\nfunction Server(srv){\r\n\tconst id  = srv.id || uuid();\r\n\tconst name = srv.name || `name_${srv.id}`;\r\n\tlet actions = [];\r\n\r\n\tthis.addActions = _actions => {\r\n\t\tactions = actions.concat((_actions || []));\r\n\t\treturn this;\r\n\t};\r\n\r\n\tthis.getId = () => {\r\n\t\treturn id;\r\n\t};\r\n\r\n\tthis.getName = () => {\r\n\t\treturn name;\r\n\t};\r\n\r\n\tthis.getActions = () => {\r\n\t\treturn actions;\r\n\t};\r\n}\r\n\r\nexport function addServer(srv){\r\n\tif (typeof srv !== 'object'){\r\n\t\tthrow TypeError('Argument must be an object like this \\r\\n \"{id: 1, name: \\'Test\\'}\"');\r\n\t}\r\n\tconst server = new Server(srv);\r\n\tservers.push(server);\r\n\treturn server;\r\n}\r\n\r\nexport function getAll(){\r\n\treturn servers;\r\n}\r\n\r\n","import { addServer, getAll } from  './servers';\r\n\r\nconst isProduction = process.env.NODE_ENV === 'production';\r\n\r\nconst wtBaseUrl = 'http://79.111.15.126';\r\nconst wtRouterId = '6385385939497347608';\r\nconst wtCustomBaseUrl = isProduction ? '/custom_web_template.html' : wtBaseUrl + '/custom_web_template.html';\r\n\r\naddServer({ id: '6668987061819174354', name: 'events' })\r\n.addActions(\r\n\t[\r\n\t\t'Data',\r\n\t\t'DataForCreate',\r\n\t\t'EventData',\r\n\t\t'AddComment',\r\n\t\t'RemoveComment',\r\n\t\t'NewEventStatus',\r\n\t\t'NewParticipiant',\r\n\t\t'ParticipiantStatus',\r\n\t\t'NewParticipiant',\r\n\t\t'Like',\r\n\t\t'SaveEvent',\r\n\t\t'Refuse',\r\n\t\t'ResolveEvent',\r\n\t\t'RejectEvent',\r\n\t\t'CompleteEvent'\r\n\t]\r\n);\r\n\r\nconst url = {\r\n\tgetServerId(serverName, actionName) {\r\n\t\tconst _servers = getAll().filter(s => {\r\n\t\t\tconst actions = s.getActions().filter(action => {\r\n\t\t\t\treturn action === actionName;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\treturn (s.getName() === serverName && actions.length > 0);\r\n\t\t}).map(s => s.getId());\r\n\t\treturn _servers.length > 0 ? _servers[0] : '';\r\n\t},\r\n\r\n\tcreatePath(inputObj){\r\n\t\tif (!('server_name' in inputObj)) return '/';\r\n\t\tif (!('action_name' in inputObj)) inputObj.action_name = '';\r\n\t\tconst serverId = this.getServerId(inputObj.server_name, inputObj.action_name);\r\n\t\tconst basePath = wtCustomBaseUrl.concat('?object_id=').concat(wtRouterId).concat('&server_id='.concat(serverId));\r\n\r\n\t\treturn basePath.concat(Object.keys(inputObj).map(k => {\r\n\t\t\treturn '&'.concat(k).concat('=').concat(inputObj[k]);\r\n\t\t}).join(''));\r\n\t}\r\n};\r\nexport { url };\r\n","import React, { Component } from 'react';\r\nimport { Form, Label, Icon, Dropdown, Input, Button, TextArea, Message, Dimmer,  Loader } from 'semantic-ui-react';\r\nimport DatePicker from 'react-datepicker';\r\nimport { setDefaultLocale } from 'react-datepicker';\r\nimport ru from 'date-fns/locale/ru';\r\nimport { bindActionCreators } from 'redux';\r\nimport * as actions from './eventActions';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\nimport moment from 'moment';\r\n\r\nimport './event.css';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\n\r\nsetDefaultLocale('ru');\r\n\r\nclass Event extends Component {\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisShowWarning: false,\r\n\t\t\tfileName: props.img_name || ''\r\n\t\t}\r\n\r\n\t\tthis.formRef = React.createRef();\r\n\r\n\t\tthis.handleSave = this.handleSave.bind(this);\r\n\t\tthis.onChangeRawStartDate = this.onChangeRawStartDate.bind(this);\r\n\t\tthis.onChangeRawFinishDate = this.onChangeRawFinishDate.bind(this);\r\n\t\tthis.handleChangeFile = this.handleChangeFile.bind(this);\r\n\t\tthis.dateFormat = 'dd.MM.yyyy, HH:mm';\r\n\t}\r\n\r\n\t_isFormFilled(){\r\n\t\tconst {\r\n\t\t\ttitle,\r\n\t\t\tlong_desc,\r\n\t\t\tshort_desc,\r\n\t\t\taddress,\r\n\t\t\tcity_id,\r\n\t\t\tsubject_id,\r\n\t\t\tmax_person_count,\r\n\t\t\tcost,\r\n\t\t\tstart_date,\r\n\t\t\tfinish_date\r\n\t\t} = this.props;\r\n\t\t//const { fileName } = this.state;\r\n\t\treturn (\r\n\t\t\ttitle.trim() !== '' &&\r\n\t\t\tlong_desc.trim() !== '' &&\r\n\t\t\tshort_desc.trim() !== '' &&\r\n\t\t\taddress.trim() !== '' &&\r\n\t\t\tcity_id.trim() !== '' &&\r\n\t\t\tmax_person_count !== '' &&\r\n\t\t\tcost !== '' &&\r\n\t\t\tstart_date !== null &&\r\n\t\t\tfinish_date !== null\r\n\t\t);\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tconst { match } = this.props;\r\n\t\tthis.props.getData(match.params.permalink);\r\n\t}\r\n\r\n\thandleChangeFile(e) {\r\n\t\tconst path = e.target.value;\r\n\t\tconst lastIndex = path.lastIndexOf('\\\\');\r\n\t\tconst fname = lastIndex === -1 ? path : path.substring(lastIndex + 1, path.length);\r\n\t\t/*this.setState({\r\n\t\t\tfileName: fname\r\n\t\t});*/\r\n\t\tthis.props.onChangeFileName(fname);\r\n\t\t//this.props.onResetPrevFile();\r\n\t}\r\n\r\n\thandleSave(){\r\n\t\tif (this._isFormFilled()){\r\n\t\t\tthis.props.onSaveEvent(document.getElementById('event-new_form'));\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisShowWarning: true\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonChangeRawStartDate(e){\r\n\t\tif (moment(e.target.value, this.dateFormat).isValid()){\r\n\t\t\tthis.props.onChangeStartDate(e.target.value);\r\n\t\t}\r\n\t}\r\n\r\n\tonChangeRawFinishDate(e){\r\n\t\tif (moment(e.target.value, this.dateFormat).isValid()){\r\n\t\t\tthis.props.onChangeFinishDate(e.target.value);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\trender(){\r\n\t\tconst {\r\n\t\t\tui,\r\n\t\t\thistory,\r\n\t\t\tonChangeTitle,\r\n\t\t\tonChangeDescription,\r\n\t\t\tonChangeShortDescription,\r\n\t\t\tonChangeStartDate,\r\n\t\t\tonChangeFinishDate,\r\n\t\t\tonChangeCity,\r\n\t\t\tonChangeAddress,\r\n\t\t\tonChangeSubject,\r\n\t\t\tonChangeMaxPersons,\r\n\t\t\tonChangeCost,\r\n\t\t\tonSaveEvent,\r\n\t\t\tid,\r\n\t\t\ttitle,\r\n\t\t\tlong_desc,\r\n\t\t\tshort_desc,\r\n\t\t\taddress,\r\n\t\t\tcity_id,\r\n\t\t\tsubject_id,\r\n\t\t\tmax_person_count,\r\n\t\t\tcost,\r\n\t\t\tstart_date,\r\n\t\t\tfinish_date,\r\n\t\t\tcities,\r\n\t\t\tsubjects,\r\n\t\t\timg_name,\r\n\t\t\tprevFileId\r\n\t\t} = this.props;\r\n\r\n\t\tconst { isShowWarning } = this.state;\r\n\r\n\t\tif (ui.isLoading){\r\n\t\t\treturn (\r\n\t\t\t\t<Dimmer active inverted>\r\n\t\t\t\t\t<Loader inverted>Loading</Loader>\r\n\t\t\t\t</Dimmer>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className='event-new'>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName='event-new__back'\r\n\t\t\t\t\tsize='tiny'\r\n\t\t\t\t\tprimary\r\n\t\t\t\t\ticon\r\n\t\t\t\t\tlabelPosition='left'\r\n\t\t\t\t\tonClick={() => history.goBack()}\r\n\t\t\t\t>\r\n\t\t\t\t\tНазад\r\n\t\t\t\t\t<Icon name='arrow left' />\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Message\r\n\t\t\t\t\tattached\r\n\t\t\t\t\theader='Создание/Редактирование мероприятия'\r\n\t\t\t\t\tcontent='Заполните форму по вашим критериям'\r\n\t\t\t\t/>\r\n\t\t\t\t<Form id='event-new_form' className='attached fluid segment' encType='multipart/form-data'>\r\n\t\t\t\t\t<Form.Field>\r\n\t\t\t\t\t\t<input type='text' className='event-new__form-field' name='id' value={id} readOnly />\r\n\t\t\t\t\t</Form.Field>\r\n\t\t\t\t\t<Form.Field required>\r\n\t\t\t\t\t\t<Label>Название *</Label>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tname='title'\r\n\t\t\t\t\t\t\tplaceholder='Введите название мероприятия'\r\n\t\t\t\t\t\t\tvalue={title}\r\n\t\t\t\t\t\t\tonChange={onChangeTitle}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Field>\r\n\t\t\t\t\t<Form.Field required>\r\n\t\t\t\t\t\t<Label>Полное описание *</Label>\r\n\t\t\t\t\t\t <TextArea\r\n\t\t\t\t\t\t \tname='long_desc'\r\n\t\t\t\t\t\t \tplaceholder='Опишите подробнее мероприятие'\r\n\t\t\t\t\t\t \tvalue={long_desc}\r\n\t\t\t\t\t\t \tstyle={{ minHeight: 100 }}\r\n\t\t\t\t\t\t \tonChange={onChangeDescription}\r\n\t\t\t\t\t\t />\r\n\t\t\t\t\t</Form.Field>\r\n\t\t\t\t\t<Form.Field>\r\n\t\t\t\t\t\t<Label>Краткое описание *</Label>\r\n\t\t\t\t\t\t <TextArea\r\n\t\t\t\t\t\t \tname='short_desc'\r\n\t\t\t\t\t\t \tplaceholder='Опишите коротко мероприятие'\r\n\t\t\t\t\t\t \tvalue={short_desc}\r\n\t\t\t\t\t\t \tstyle={{ minHeight: 100 }}\r\n\t\t\t\t\t\t \tonChange={onChangeShortDescription}\r\n\t\t\t\t\t\t />\r\n\t\t\t\t\t</Form.Field>\r\n\t\t\t\t\t<Form.Group inline>\r\n\t\t\t\t\t\t<Form.Field>\r\n\t\t\t\t\t\t\t\t<label className='event-new__calendar-label'> C *</label>\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\tclassName='event-new__calendar-icon'\r\n\t\t\t\t\t\t\t\t\tname='calendar'\r\n\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\tname='start_date'\r\n\t\t\t\t\t\t\t\t\tlocale={ru}\r\n\t\t\t\t\t\t\t\t\tselected={start_date}\r\n\t\t\t\t\t\t\t\t\tshowTimeSelect\r\n\t\t\t\t\t\t\t\t\ttimeIntervals={10}\r\n\t\t\t    \t\t\t\t\ttimeFormat='HH:mm'\r\n\t\t\t    \t\t\t\t\tdateFormat={this.dateFormat}\r\n\t\t\t    \t\t\t\t\ttimeCaption='время'\r\n\t\t\t    \t\t\t\t\tplaceholderText='Дата начала'\r\n\t\t\t    \t\t\t\t\tonChange={onChangeStartDate}\r\n\t\t\t    \t\t\t\t\tonChangeRaw={this.onChangeRawStartDate}\r\n\t\t\t    \t\t\t\t\tdisabledKeyboardNavigation\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Field>\r\n\t\t\t\t\t\t<Form.Field>\r\n\t\t\t\t\t\t\t\t<label className='event-new__calendar-label'> По *</label>\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\tclassName='event-new__calendar-icon'\r\n\t\t\t\t\t\t\t\t\tname='calendar'\r\n\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\tname='finish_date'\r\n\t\t\t\t\t\t\t\t\tlocale={ru}\r\n\t\t\t\t\t\t\t\t\tselected={finish_date}\r\n\t\t\t\t\t\t\t\t\tshowTimeSelect\r\n\t\t\t\t\t\t\t\t\ttimeIntervals={10}\r\n\t\t\t    \t\t\t\t\ttimeFormat='HH:mm'\r\n\t\t\t    \t\t\t\t\tdateFormat={this.dateFormat}\r\n\t\t\t    \t\t\t\t\ttimeCaption='время'\r\n\t\t\t    \t\t\t\t\tplaceholderText='Дата окончания'\r\n\t\t\t    \t\t\t\t\tonChange={onChangeFinishDate}\r\n\t\t\t    \t\t\t\t\tonChangeRaw={this.onChangeRawFinishDate}\r\n\t\t\t    \t\t\t\t\tdisabledKeyboardNavigation\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Field>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Form.Group widths='equal'>\r\n\t\t\t\t\t\t<Form.Field required>\r\n\t\t\t\t\t\t\t<Label>Город *</Label>\r\n\t\t\t\t\t\t\t<input readOnly className='event-new__form-field' type='text' name='city_id' value={city_id} />\r\n\t\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\t\tplaceholder='Выберите город'\r\n\t\t\t\t\t\t\t\tupward\r\n\t\t\t\t\t\t\t\tsearch\r\n\t\t\t\t\t\t\t\tselection\r\n\t\t\t\t\t\t\t\toptions={cities}\r\n\t\t\t\t\t\t\t\tonChange={onChangeCity}\r\n\t\t\t\t\t\t\t\tvalue={city_id}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Field>\r\n\t\t\t\t\t\t<Form.Field required>\r\n\t\t\t\t\t\t\t<Label>Адрес *</Label>\r\n\t\t\t\t\t\t\t<Input type='text' name='address' placeholder='Введите адрес' value={address} onChange={onChangeAddress}/>\r\n\t\t\t\t\t\t</Form.Field>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Form.Field>\r\n\t\t\t\t\t\t<Label>Тематика проведения *</Label>\r\n\t\t\t\t\t\t<input readOnly className='event-new__form-field' type='text' name='subject_id' value={subject_id} />\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tplaceholder='Выберите тематику'\r\n\t\t\t\t\t\t\tupward\r\n\t\t\t\t\t\t\tfluid\r\n\t\t\t\t\t\t\tselection\r\n\t\t\t\t\t\t\toptions={subjects}\r\n\t\t\t\t\t\t\tonChange={onChangeSubject}\r\n\t\t\t\t\t\t\tvalue={subject_id}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Field>\r\n\t\t\t\t\t<Form.Group widths='equal'>\r\n\t\t\t\t\t\t<Form.Field>\r\n\t\t\t\t\t\t\t<Label>Кол-во участников (0 - неограниченно) *</Label>\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tname='max_person_count'\r\n\t\t\t\t\t\t\t\tplaceholder='Введите кол-во участников'\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tonChange={onChangeMaxPersons}\r\n\t\t\t\t\t\t\t\tvalue={max_person_count}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Field>\r\n\t\t\t\t\t\t<Form.Field>\r\n\t\t\t\t\t\t\t<Label>Стоимость (0 - бесплатно) *</Label>\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tname='cost'\r\n\t\t\t\t\t\t\t\taction={{ icon: 'ruble sign' }}\r\n\t\t\t\t\t\t\t\tlabelPosition='right'\r\n\t\t\t\t\t\t\t\tplaceholder='Введите стоимость'\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tonChange={onChangeCost}\r\n\t\t\t\t\t\t\t\tvalue={cost}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Field>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Form.Field>\r\n\t\t\t\t\t\t<div className='event-new__file_upload'>\r\n\t\t\t\t\t\t\t<Button size='tiny'>Выберите изображение</Button>\r\n\t\t\t\t\t\t\t<div className='event-new__file_upload-name'>{img_name || 'Файл не выбран'}</div>\r\n\t\t\t\t\t\t\t<input readOnly className='event-new__form-field' type='text' name='prev_file_id' value={prevFileId} />\r\n\t\t\t\t\t\t\t<input type='file' name='upload_file' accept='image/*' onChange={this.handleChangeFile}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Form.Field>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\tonClick={this.handleSave}\r\n\t\t\t\t\t>Сохранить</Button>\r\n\t\t\t\t</Form>\r\n\t\t\t\t\r\n\t\t\t\t<Message attached='bottom' warning>\r\n\t\t\t\t\t<Icon name='help' />\r\n\t\t\t\t\tПоля помеченные &nbsp;*&nbsp; обязательные для заполнения\r\n\t\t\t\t\t{isShowWarning && <Message error>\r\n\t\t\t\t\t<Icon name='exclamation' />\r\n\t\t\t\t\tЗаполнены не все поля!\r\n\t\t\t\t</Message>}\r\n\t\t\t\t</Message>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n\treturn state.event;\r\n};\r\n\r\nconst mapDispatchProps = (dispatch, ownProps) => {\r\n\treturn {\r\n\t\t...bindActionCreators(actions, dispatch),\r\n\t\tonSaveEvent: (formRef) => dispatch(actions.saveEvent(formRef, ownProps.history))\r\n\t}\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchProps)(Event));","export { default } from './Event';","if (process.env.NODE_ENV === 'production') {\r\n\tmodule.exports = require('./configureStore.prod');\r\n} else {\r\n\tmodule.exports = require('./configureStore.dev');\r\n}","import { url } from '../../../config';\r\nimport createRemoteActions from '../../utils/createRemoteActions';\r\nimport { omit } from 'lodash';\r\nrequire('formdata-polyfill');\r\n\r\nexport const constants = {\r\n\t'NEW_EVENT_CHANGE_TITLE': 'NEW_EVENT_CHANGE_TITLE',\r\n\t'NEW_EVENT_CHANGE_DESCRIPTION': 'NEW_EVENT_CHANGE_DESCRIPTION',\r\n\t'NEW_EVENT_CHANGE_SHORT_DESCRIPTION': 'NEW_EVENT_CHANGE_SHORT_DESCRIPTION',\r\n\t'NEW_EVENT_CHANGE_START_DATE': 'NEW_EVENT_CHANGE_START_DATE',\r\n\t'NEW_EVENT_CHANGE_FINISH_DATE': 'NEW_EVENT_CHANGE_FINISH_DATE',\r\n\t'NEW_EVENT_CHANGE_CITY': 'NEW_EVENT_CHANGE_CITY',\r\n\t'NEW_EVENT_CHANGE_SUBJECT': 'NEW_EVENT_CHANGE_SUBJECT',\r\n\t'NEW_EVENT_CHANGE_MAX_PERSONS': 'NEW_EVENT_CHANGE_MAX_PERSONS',\r\n\t'NEW_EVENT_CHANGE_COST': 'NEW_EVENT_CHANGE_COST',\r\n\t'NEW_EVENT_CHANGE_ADDRESS': 'NEW_EVENT_CHANGE_ADDRESS',\r\n\t'NEW_EVENT_LOADING': 'NEW_EVENT_LOADING',\r\n\t'NEW_EVENT_CHANGE_FILE_NAME': 'NEW_EVENT_CHANGE_FILE_NAME',\r\n\t...createRemoteActions('GET_EVENT_CREATE')\r\n}\r\n\r\nfunction loading(isLoading){\r\n\treturn {\r\n\t\ttype: constants.NEW_EVENT_LOADING,\r\n\t\tpayload: isLoading\r\n\t}\r\n}\r\n\r\nexport function onChangeFileName(fname){\r\n\treturn {\r\n\t\ttype: constants.NEW_EVENT_CHANGE_FILE_NAME,\r\n\t\tpayload: fname\r\n\t}\r\n}\r\n\r\nexport function onChangeTitle(event, data){\r\n\treturn {\r\n\t\ttype: constants.NEW_EVENT_CHANGE_TITLE,\r\n\t\tpayload: data.value\r\n\t}\r\n}\r\n\r\nexport function onChangeDescription(event, data){\r\n\treturn {\r\n\t\ttype: constants.NEW_EVENT_CHANGE_DESCRIPTION,\r\n\t\tpayload: data.value\r\n\t}\r\n}\r\n\r\nexport function onChangeShortDescription(event, data){\r\n\treturn {\r\n\t\ttype: constants.NEW_EVENT_CHANGE_SHORT_DESCRIPTION,\r\n\t\tpayload: data.value\r\n\t}\r\n}\r\n\r\nexport function onChangeStartDate(date){\r\n\treturn {\r\n\t\ttype: constants.NEW_EVENT_CHANGE_START_DATE,\r\n\t\tpayload: date\r\n\t}\r\n}\r\n\r\nexport function onChangeFinishDate(date){\r\n\treturn {\r\n\t\ttype: constants.NEW_EVENT_CHANGE_FINISH_DATE,\r\n\t\tpayload: date\r\n\t}\r\n}\r\n\r\nexport function onChangeCity(event, data){\r\n\treturn {\r\n\t\ttype: constants.NEW_EVENT_CHANGE_CITY,\r\n\t\tpayload: data.value\r\n\t}\r\n}\r\n\r\nexport function onChangeAddress(event, data){\r\n\treturn {\r\n\t\ttype: constants.NEW_EVENT_CHANGE_ADDRESS,\r\n\t\tpayload: data.value\r\n\t}\r\n}\r\n\r\nexport function onChangeSubject(event, data){\r\n\treturn {\r\n\t\ttype: constants.NEW_EVENT_CHANGE_SUBJECT,\r\n\t\tpayload: data.value\r\n\t}\r\n}\r\n\r\nexport function onChangeMaxPersons(event, data){\r\n\tlet payload = parseInt(data.value);\r\n\r\n\tif (isNaN(payload) || data.value < 0 || data.value === '') {\r\n\t\tpayload = '';\r\n\t}\r\n\r\n\treturn {\r\n\t\ttype: constants.NEW_EVENT_CHANGE_MAX_PERSONS,\r\n\t\tpayload\r\n\t}\r\n}\r\n\r\nexport function onChangeCost(event, data){\r\n\tlet payload = parseInt(data.value);\r\n\r\n\tif (isNaN(payload) || data.value < 0 || data.value === '') {\r\n\t\tpayload = '';\r\n\t}\r\n\t\r\n\treturn {\r\n\t\ttype: constants.NEW_EVENT_CHANGE_COST,\r\n\t\tpayload\r\n\t}\r\n}\r\n\r\nexport function saveEvent(form, history){\r\n\treturn (dispatch, getState) => {\r\n\t\t//const { event } = getState();\r\n\r\n\t\t//const data = omit(event, [ 'cities', 'subjects' ]);\r\n\r\n\t\tconst path = url.createPath({\r\n\t\t\tserver_name: 'events',\r\n\t\t\taction_name: 'SaveEvent'\r\n\t\t});\r\n\r\n\t\tconst data = new FormData(form);\r\n\r\n\t\tdispatch(loading(true));\r\n\t\tfetch(path, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\t/*headers: {  \r\n\t\t\t\t'Content-type': 'application/x-www-form-urlencoded; charset=UTF-8'  \r\n\t\t\t},*/\r\n\t\t\tbody: data\r\n\t\t})\r\n\t\t.then(resp => {\r\n\t\t\treturn resp.json();\r\n\t\t})\r\n\t\t.then(data => {\r\n\t\t\tif (data.error){\r\n\t\t\t\t//dispatch(error(data.error));\r\n\t\t\t\tconsole.log(data.error);\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(loading(false));\r\n\t\t\t\thistory.push(`/event/details/${data.id}`);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(e => {\r\n\t\t\t//dispatch(error(e.message));\r\n\t\t\tconsole.log(e.message);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function getData(eventId){\r\n\treturn dispatch => {\r\n\t\tif (eventId){\r\n\t\t\tconst path = url.createPath({\r\n\t\t\t\tserver_name: 'events',\r\n\t\t\t\taction_name: 'EventData',\r\n\t\t\t\tid: eventId\r\n\t\t\t});\r\n\r\n\t\t\tdispatch(loading(true));\r\n\t\t\tfetch(path)\r\n\t\t\t.then(resp => {\r\n\t\t\t\treturn resp.json();\r\n\t\t\t})\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (data.error){\r\n\t\t\t\t\t//dispatch(error(data.error));\r\n\t\t\t\t\tconsole.log(data.error);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdispatch(loading(false));\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: constants.GET_EVENT_CREATE_SUCCESS,\r\n\t\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\t\tid: eventId,\r\n\t\t\t\t\t\t\t...data\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(e => {\r\n\t\t\t\t//dispatch(error(e.message));\r\n\t\t\t\tconsole.log(e.message);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconst path = url.createPath({\r\n\t\t\t\tserver_name: 'events',\r\n\t\t\t\taction_name: 'DataForCreate'\r\n\t\t\t});\r\n\r\n\t\t\tdispatch(loading(true));\r\n\t\t\tfetch(path, { method: 'POST' })\r\n\t\t\t.then(resp => {\r\n\t\t\t\treturn resp.json();\r\n\t\t\t})\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (data.error){\r\n\t\t\t\t\t//dispatch(error(data.error));\r\n\t\t\t\t\tconsole.log(data.error);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdispatch(loading(false));\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: constants.GET_EVENT_CREATE_SUCCESS,\r\n\t\t\t\t\t\tpayload: data\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(e => {\r\n\t\t\t\t//dispatch(error(e.message));\r\n\t\t\t\tconsole.log(e.message);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t/*dispatch(loading(true));\r\n\t\tsetTimeout(() => {\r\n\t\t\tdispatch(loading(false));\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: constants.GET_EVENT_CREATE_SUCCESS,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t  \"id\": \"6675349716799068736\",\r\n\t\t\t\t  \"cur_user_id\": \"6148914691236517121\",\r\n\t\t\t\t  \"user_role\": \"admin\",\r\n\t\t\t\t  \"title\": \"Мой тест\",\r\n\t\t\t\t  \"status_id\": \"plan\",\r\n\t\t\t\t  \"status_name\": \"Активные\",\r\n\t\t\t\t  \"long_desc\": \"Полное\",\r\n\t\t\t\t  \"img\": \"/download_file.html?file_id=6674662346535409549\",\r\n\t\t\t\t  \"img_name\": \"test.png\",\r\n\t\t\t\t  \"max_person_count\": \"7\",\r\n\t\t\t\t  \"start_date\": \"Tue, 02 Apr 2019 17:25:36 +0300\",\r\n\t\t\t\t  \"finish_date\": \"Tue, 02 Apr 2019 18:50:00 +0300\",\r\n\t\t\t\t  \"cost\": \"8000\",\r\n\t\t\t\t  \"city_id\": \"5667697629116916647\",\r\n\t\t\t\t  \"city\": \"Алматы\",\r\n\t\t\t\t  \"subject_id\": \"Здоровье\",\r\n\t\t\t\t  \"address\": \"\",\r\n\t\t\t\t  \"phone_number\": \"84993674214\",\r\n\t\t\t\t  \"email\": \"user_006@gmail.com\",\r\n\t\t\t\t  \"event_admin_id\": \"6671539145020354632\",\r\n\t\t\t\t  \"event_admin_fullname\": \"Бахирев Рустам Маратович\",\r\n\t\t\t\t  \"event_admin_position\": \"Главный бухгалтер\",\r\n\t\t\t\t  \"event_admin_avatar\": \"/download_file.html?file_id=6671539891956233514\",\r\n\t\t\t\t  \"like_count\": \"0\",\r\n\t\t\t\t  \"collaborators\": [],\r\n\t\t\t\t  \"comments\": [],\r\n\t\t\t\t  \"cities\": [\r\n\t\t\t\t    {\r\n\t\t\t\t      \"id\": \"5667697629116916643\",\r\n\t\t\t\t      \"name\": \"Абакан\"\r\n\t\t\t\t    },\r\n\t\t\t\t    {\r\n\t\t\t\t      \"id\": \"5667697629116916644\",\r\n\t\t\t\t      \"name\": \"Аксай\"\r\n\t\t\t\t    },\r\n\t\t\t\t    {\r\n\t\t\t\t      \"id\": \"5667697629116916645\",\r\n\t\t\t\t      \"name\": \"Актау\"\r\n\t\t\t\t    },\r\n\t\t\t\t    {\r\n\t\t\t\t      \"id\": \"5667697629116916646\",\r\n\t\t\t\t      \"name\": \"Актобе\"\r\n\t\t\t\t    },\r\n\t\t\t\t    {\r\n\t\t\t\t      \"id\": \"5667697629116916647\",\r\n\t\t\t\t      \"name\": \"Алматы\"\r\n\t\t\t\t    },\r\n\t\t\t\t    {\r\n\t\t\t\t      \"id\": \"5667697629116916648\",\r\n\t\t\t\t      \"name\": \"Архангельск\"\r\n\t\t\t\t    },\r\n\t\t\t\t    {\r\n\t\t\t\t      \"id\": \"5667697629116916649\",\r\n\t\t\t\t      \"name\": \"Астана\"\r\n\t\t\t\t    },\r\n\t\t\t\t    {\r\n\t\t\t\t      \"id\": \"5667697629116916650\",\r\n\t\t\t\t      \"name\": \"Астрахань\"\r\n\t\t\t\t    },\r\n\t\t\t\t    {\r\n\t\t\t\t      \"id\": \"5667697629116916651\",\r\n\t\t\t\t      \"name\": \"Атырау\"\r\n\t\t\t\t    },\r\n\t\t\t\t    {\r\n\t\t\t\t      \"id\": \"5667697629116916652\",\r\n\t\t\t\t      \"name\": \"Барнаул\"\r\n\t\t\t\t    },\r\n\t\t\t\t    {\r\n\t\t\t\t      \"id\": \"5667697629116916653\",\r\n\t\t\t\t      \"name\": \"Белгород\"\r\n\t\t\t\t    },\r\n\t\t\t\t    {\r\n\t\t\t\t      \"id\": \"5667697629116916654\",\r\n\t\t\t\t      \"name\": \"Бобруйск\"\r\n\t\t\t\t    },\r\n\t\t\t\t    {\r\n\t\t\t\t      \"id\": \"5667697629116916655\",\r\n\t\t\t\t      \"name\": \"Брест\"\r\n\t\t\t\t    },\r\n\t\t\t\t    {\r\n\t\t\t\t      \"id\": \"5667697629116916656\",\r\n\t\t\t\t      \"name\": \"Брянск\"\r\n\t\t\t\t    },\r\n\t\t\t\t    {\r\n\t\t\t\t      \"id\": \"5667697629116916657\",\r\n\t\t\t\t      \"name\": \"Винница\"\r\n\t\t\t\t    }\r\n\t\t\t\t  ],\r\n\t\t\t\t  \"subjects\": [\r\n\t\t\t\t    \"Образование\",\r\n\t\t\t\t    \"Спорт\",\r\n\t\t\t\t    \"Здоровье\",\r\n\t\t\t\t    \"Путешествия, туризм\",\r\n\t\t\t\t    \"Культура\",\r\n\t\t\t\t    \"Развлечение\"\r\n\t\t\t\t  ]\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 1000);*/\r\n\t};\r\n}","import { url } from '../../../config';\r\nimport createRemoteActions from '../../utils/createRemoteActions';\r\nimport initialData from '../../mock/static.json';\r\n\r\nexport const constants = {\r\n\t...createRemoteActions('GET_INITIAL_DATA'),\r\n\t'INITIAL_LOADING': 'INITIAL_LOADING'\r\n}\r\n\r\nfunction loading(isLoading){\r\n\treturn {\r\n\t\ttype: constants.INITIAL_LOADING,\r\n\t\tpayload: isLoading\r\n\t}\r\n}\r\n\r\nexport function getInitialData(){\r\n\treturn (dispatch, getState) => {\r\n\r\n\t\t/*dispatch(loading(true));\r\n\t\tsetTimeout((search, status) => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: constants.GET_INITIAL_DATA_SUCCESS,\r\n\t\t\t\tpayload: initialData\r\n\t\t\t});\r\n\t\t\tdispatch(loading(false));\r\n\t\t}, 1000);*/\r\n\r\n\t\t\r\n\t\tdispatch(loading(true));\r\n\t\tconst { home } = getState();\r\n\r\n\t\tconst path = url.createPath({\r\n\t\t\tserver_name: 'events',\r\n\t\t\taction_name: 'Data',\r\n\t\t\tstatus: home.ui.filters.status,\r\n\t\t\tsearch: home.ui.filters.search,\r\n\t\t\tcity: home.ui.filters.city,\r\n\t\t\tsubject: home.ui.filters.subject\r\n\t\t});\r\n\r\n\t\tfetch(path)\r\n\t\t.then(resp => {\r\n\t\t\treturn resp.json();\r\n\t\t})\r\n\t\t.then(data => {\r\n\t\t\tif (data.error){\r\n\t\t\t\t//dispatch(error(data.error));\r\n\t\t\t\tconsole.log(data.error);\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(loading(false));\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: constants.GET_INITIAL_DATA_SUCCESS,\r\n\t\t\t\t\tpayload: data\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}).catch(e => {\r\n\t\t\t//dispatch(error(e.message));\r\n\t\t\tconsole.log(e.message);\r\n\t\t});\r\n\t};\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Popup, Icon } from 'semantic-ui-react'\r\nimport cs from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport { url } from '../../../../config';\r\nimport toBoolean from '../../../utils/toBoolean';\r\n\r\nimport './eventOfList.css';\r\n\r\nclass Event extends Component {\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tlike_count: props.like_count,\r\n\t\t\tis_liked: toBoolean(props.is_liked)\r\n\t\t}\r\n\t\tthis.handleLike = this.handleLike.bind(this);\r\n\t}\r\n\r\n\thandleLike(e) {\r\n\t\te.preventDefault();\r\n\t\tconst self = this;\r\n\r\n\t\tconst path = url.createPath({\r\n\t\t\tserver_name: 'events',\r\n\t\t\taction_name: 'Like'\r\n\t\t});\r\n\t\tfetch(path, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tid: this.props.id\r\n\t\t\t})\r\n\t\t}).then(resp => {\r\n\t\t\treturn resp.json();\r\n\t\t}).then(data => {\r\n\t\t\tself.setState({\r\n\t\t\t\tlike_count: data.count,\r\n\t\t\t\tis_liked: !self.state.is_liked\r\n\t\t\t})\r\n\t\t}).catch(e => {\r\n\t\t\tconsole.error(e.message);\r\n\t\t});\r\n\t}\r\n\r\n\trender(){\r\n\t\tconst {\r\n\t\t\tid,\r\n\t\t\ttitle,\r\n\t\t\tshort_desc,\r\n\t\t\tsubject_id,\r\n\t\t\tcity,\r\n\t\t\timg,\r\n\t\t\tmax_person_count,\r\n\t\t\tcur_person_count,\r\n\t\t\tstart_date,\r\n\t\t\tcost,\r\n\t\t\tevent_admin_fullname,\r\n\t\t\tevent_admin_avatar,\r\n\t\t\taddress,\r\n\t\t\tcomments_count\r\n\t\t} = this.props;\r\n\r\n\t\tconst { like_count, is_liked } = this.state;\r\n\r\n\t\tconst isLikedClass = cs({\r\n\t\t\t'mdl-button--colored': is_liked\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<Link className='event-of-list' to={`/event/details/${id}`}\r\n\t\t\t\tclassName='mdl-cell mdl-cell--4-col mdl-card mdl-shadow--2dp otp-news otp-news__link'\r\n\t\t\t>\r\n\t\t\t\t<div className='mdl-card__title'>\r\n\t\t\t\t\t<div className='mdl-card__subtitle-text otp-event__type'>{subject_id}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='mdl-card__media mdl-card__media--h-140 mdl-color--grey-500'\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackground: `url(${img}) center/cover no-repeat`\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={{marginBottom: 0}}\r\n\t\t\t\t\t\tclassName='mdl-color--light-blue-900 mdl-color-text--white otp-card__media-label otp-event__date'>\r\n\t\t\t\t\t\t{city}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span className='mdl-color--primary mdl-color-text--white otp-card__media-label otp-event__date'>\r\n\t\t\t\t\t\t{new Date(start_date).toLocaleDateString('ru-RU', {year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric'})}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<div className='event-of-list__lectors'>\r\n\t\t\t\t\t\t<Popup inverted size='mini' trigger={\r\n\t\t\t\t\t\t\t<div className='event-of-list__lector' style={{\r\n\t\t\t\t\t\t\t\tbackgroundImage: `url(${event_admin_avatar})`\r\n\t\t\t\t\t\t\t}} />\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t{event_admin_fullname}\r\n\t\t\t\t\t\t</Popup>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='mdl-card__title' style={{ paddingRight: '60px' }}>\r\n\t\t\t\t\t<div className='mdl-card__subtitle-text otp-event__place'>{address}</div>\r\n\t\t\t\t\t<div className='mdl-card__title-text otp-event__name'>{title}&nbsp;</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='mdl-card__supporting-text mdl-card--expand otp-event__comment'>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<i>{short_desc}</i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='mdl-card__actions mdl-card--border'>\r\n\t\t\t\t\t<div className='otp-action__item'>\r\n\t\t\t\t\t\t<button onClick={this.handleLike} className={`mdl-button mdl-button--icon otp-news__like-button ${isLikedClass}`}>\r\n\t\t\t\t\t\t\t<i className='material-icons mdl-18 otp-action__icon'>thumb_up</i>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<span className='otp-action__label otp-news__like'>{like_count}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='otp-action__item'>\r\n\t\t\t\t\t\t<i className='material-icons mdl-18 otp-action__icon'>forum</i>\r\n\t\t\t\t\t\t<span className='otp-action__label otp-news__comment-count'>{comments_count}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='otp-action__item' style={{\r\n\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\tright: 0\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{cost == 0 ?\r\n\t\t\t\t\t\t\t<span className='otp-color--black-hint'>Бесплатное</span> :\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t<Icon name='ruble sign' color='grey'/>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclassName='otp-action__label otp-news__comment-count otp-color--black-hint'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{cost}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*<div className='mdl-card__actions'>\r\n\t\t\t\t\t<Link to={`/event/details/${id}`} className='mdl-button mdl-button--colored otp-event__link'>Подробнее</Link>\r\n\t\t\t\t\t<div className='mdl-layout-spacer'></div>\r\n\t\t\t\t</div>*/}\r\n\t\t\t\t<div className='mdl-card__menu'>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclassName='otp-color--black-hint'\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\talignItems: 'center'}}\r\n\t\t\t\t\t\ttitle='Количество участников'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{max_person_count == 0 ?\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\tБез ограничений\r\n\t\t\t\t\t\t\t</span> :\r\n\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\talignItems: 'center'}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<i className='material-icons' style={{marginRight: '4px'}}>group</i>\r\n\t\t\t\t\t\t\t\t<b className='otp-event__count'>{cur_person_count} / {max_person_count}</b>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default Event;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './search-bar.css';\r\n\r\nclass SearchBar extends Component {\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t\tthis.handleSearch = this.handleSearch.bind(this);\r\n\t\tthis.state = {\r\n\t\t\tvalue: props.value || ''\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps){\r\n\t\tif (this.props.value !== nextProps.value){\r\n\t\t\tthis.setState({ value: nextProps.value });\r\n\t\t}\r\n\t}\r\n\r\n\thandleChange(e){\r\n\t\tthis.setState({ value: e.target.value });\r\n\t\tif (this.props.onChange){\r\n\t\t\tthis.props.onChange(e.target.value);\r\n\t\t}\r\n\t}\r\n\r\n\thandleSearch(e){\r\n\t\tif (e.keyCode === 13 && this.props.onSearch){\r\n\t\t\tthis.props.onSearch(e.target.value);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst className = this.props.className ? this.props.className : '';\r\n\t\tconst classNameInput = this.props.classNameInput ? this.props.classNameInput : '';\r\n\t\treturn (\r\n\t\t\t<div className={`search-box ${  className}`}>\r\n\t\t\t\t<input\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\tonKeyDown={this.handleSearch}\r\n\t\t\t\t\tclassName={`search-box__search-input ${  classNameInput}`}\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tvalue={this.state.value}\r\n\t\t\t\t\tplaceholder='Поиск...'\r\n\t\t\t\t/>\r\n\t\t\t\t<i className='search-box__search-icon material-icons'>search</i>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nSearchBar.propTypes = {\r\n\tvalue: PropTypes.string,\r\n\tclassName: PropTypes.string,\r\n\tclassNameInput: PropTypes.string,\r\n\tonSearch: PropTypes.func,\r\n\tonChange: PropTypes.func\r\n};\r\n\r\nexport default SearchBar;","import React, { Component } from 'react';\r\nimport SearchBar from '../../../components/search-bar';\r\nimport { Grid, Search, Dropdown, Button, Icon, Pagination } from 'semantic-ui-react';\r\n//import { ButtonSuccess, ButtonWarning, ButtonInfo, ButtonDanger } from '../../../components/button';\r\nimport { changeStatus, changeSearch, changePage, changeSubject, changeCity, changeAffilation, search, statuses } from './filtersActions';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport './filters.css';\r\n\r\nconst Filters = ({\r\n\tonChangeStatus,\r\n\tonChangeSearch,\r\n\tonChangeSubject,\r\n\tonChangeCity,\r\n\tonChangeAffilation,\r\n\tfilter,\r\n\tsearch,\r\n\tpage,\r\n\tpagesCount,\r\n\tonChangePage,\r\n\tstatus,\r\n\tsubject,\r\n\tcity,\r\n\tcities,\r\n\taffilation,\r\n\taffilations,\r\n\tsubjects,\r\n\tstatuses,\r\n\thistory,\r\n\tchildren\r\n}) => {\r\n\t//const { ALL, SELF, PLAN } = visibilityFilters;\r\n\treturn (\r\n\t\t<div className='filters'>\r\n\t\t\t<Grid className='filters__menu' columns='equal'>\r\n\t\t\t\t<Grid.Column width={3}>\r\n\t\t\t\t\t<SearchBar\r\n\t\t\t\t\t\tclassNameInput='filters__search-bar'\r\n\t\t\t\t\t\tonChange={ onChangeSearch }\r\n\t\t\t\t\t\tonSearch={ filter }\r\n\t\t\t\t\t\tvalue={search}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t\t<Grid.Column width={11}>\r\n\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\tclassName='filters__dropdown'\r\n\t\t\t\t\t\tselection\r\n\t\t\t\t\t\toptions={affilations}\r\n\t\t\t\t\t\tonChange={onChangeAffilation}\r\n\t\t\t\t\t\tvalue={affilation}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\tclassName='filters__dropdown'\r\n\t\t\t\t\t\tplaceholder='Выберите город'\r\n\t\t\t\t\t\tsearch\r\n\t\t\t\t\t\tselection\r\n\t\t\t\t\t\toptions={cities}\r\n\t\t\t\t\t\tonChange={onChangeCity}\r\n\t\t\t\t\t\tvalue={city}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\tclassName='filters__dropdown'\r\n\t\t\t\t\t\tplaceholder='Выберите тематику'\r\n\t\t\t\t\t\tselection\r\n\t\t\t\t\t\toptions={subjects}\r\n\t\t\t\t\t\tonChange={onChangeSubject}\r\n\t\t\t\t\t\tvalue={subject}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\tclassName='filters__dropdown'\r\n\t\t\t\t\t\tplaceholder='Выберите статус'\r\n\t\t\t\t\t\tselection\r\n\t\t\t\t\t\toptions={statuses}\r\n\t\t\t\t\t\tonChange={onChangeStatus}\r\n\t\t\t\t\t\tvalue={status}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{/*<Button\r\n\t\t\t\t\t\tcolor='green'\r\n\t\t\t\t\t\tactive={status === ALL}\r\n\t\t\t\t\t\tonClick={() => onChangeStatus(ALL)}\r\n\r\n\t\t\t\t\t>Все</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tcolor='yellow'\r\n\t\t\t\t\t\tactive={status === SELF}\r\n\t\t\t\t\t\tonClick={() => onChangeStatus(SELF)}\r\n\t\t\t\t\t>Мои</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tcolor='blue'\r\n\t\t\t\t\t\tactive={status === PLAN}\r\n\t\t\t\t\t\tonClick={() => onChangeStatus(PLAN)}\r\n\t\t\t\t\t>Планируются</Button>*/}\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t\t<Grid.Column floated='right'>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize='tiny'\r\n\t\t\t\t\t\tclassName='filters__button filters__create-event'\r\n\t\t\t\t\t\tcolor='red'\r\n\t\t\t\t\t\ticon\r\n\t\t\t\t\t\tlabelPosition='left'\r\n\t\t\t\t\t\tonClick={() => history.push('/event/new')}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tСоздать\r\n\t\t\t\t\t\t<Icon name='pencil alternate' />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t</Grid>\r\n\t\t\t{children}\r\n\t\t\t<Pagination\r\n\t\t\t\tclassName='filters__pagination'\r\n\t\t\t\tactivePage={page}\r\n\t\t\t\tfirstItem={{ content: <Icon name='angle double left' />, icon: true }}\r\n\t\t\t\tlastItem={{ content: <Icon name='angle double right' />, icon: true }}\r\n\t\t\t\tprevItem={{ content: <Icon name='angle left' />, icon: true }}\r\n\t\t\t\tnextItem={{ content: <Icon name='angle right' />, icon: true }}\r\n\t\t\t\ttotalPages={pagesCount}\r\n\t\t\t\tonPageChange={onChangePage}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n\tconst { user, statuses, cities, affilations, subjects } = state.home;\r\n\r\n\tconst _statuses = statuses.filter(s => {\r\n\t\treturn s.roles.indexOf(user.user_role) !== -1;\r\n\t});\r\n\r\n\treturn {\r\n\t\tcities,\r\n\t\taffilations,\r\n\t\tsubjects,\r\n\t\tstatuses: _statuses,\r\n\t\t...state.home.ui.filters\r\n\t};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonChangeStatus: (event, data) => {\r\n\t\t\tdispatch(changePage(1));\r\n\t\t\tdispatch(changeStatus(data.value));\r\n\t\t\tdispatch(search());\r\n\t\t},\r\n\t\tonChangeSearch: (value) => {\r\n\t\t\tdispatch(changeSearch(value));\r\n\t\t},\r\n\t\tonChangePage: (event, data) => {\r\n\t\t\tdispatch(changePage(data.activePage));\r\n\t\t\tdispatch(search());\r\n\t\t},\r\n\t\tonChangeSubject: (event, data) => {\r\n\t\t\tdispatch(changePage(1));\r\n\t\t\tdispatch(changeSubject(data.value));\r\n\t\t\tdispatch(search());\r\n\t\t},\r\n\t\tonChangeCity: (event, data) => {\r\n\t\t\tdispatch(changePage(1));\r\n\t\t\tdispatch(changeCity(data.value));\r\n\t\t\tdispatch(search());\r\n\t\t},\r\n\t\tonChangeAffilation: (event, data) => {\r\n\t\t\tdispatch(changePage(1));\r\n\t\t\tdispatch(changeAffilation(data.value));\r\n\t\t\tdispatch(search());\r\n\t\t},\r\n\t\tfilter: () => {\r\n\t\t\tdispatch(changePage(1));\r\n\t\t\tdispatch(search());\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Filters));","import React, { Component } from 'react';\r\nimport Event from './event';\r\nimport { Segment, Header, Icon, Button, Dimmer, Loader } from 'semantic-ui-react';\r\nimport Filters from './filters';\r\nimport { connect } from 'react-redux';\r\nimport { getInitialData } from './homeActions';\r\nimport { clearFields } from './filters/filtersActions';\r\n\r\nimport './home.css';\r\n\r\nclass Home extends Component {\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.props.loadData();\r\n\t}\r\n\r\n\trender(){\r\n\t\tconst { events, ui } = this.props;\r\n\t\tconst len = events.length;\r\n\r\n\t\treturn (\r\n\t\t\t<div className='home'>\r\n\t\t\t\t<Filters>\r\n\t\t\t\t\t<div className='clearfix' />\r\n\t\t\t\t\t<div className='mdl-grid mdl-grid--no-spacing'>\r\n\t\t\t\t\t\t<div className='mdl-cell mdl-cell--12-col-desktop'>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tui.isLoading ? (\r\n\t\t\t\t\t\t\t\t\t<Dimmer active inverted>\r\n\t\t\t\t\t\t\t\t\t\t<Loader inverted>Loading</Loader>\r\n\t\t\t\t\t\t\t\t\t</Dimmer>\r\n\t\t\t\t\t\t\t\t) : (\r\n\r\n\t\t\t\t\t\t\t\t\t<div className='mdl-grid'>\r\n\t\t\t\t\t\t\t\t\t\t{len > 0 ?\r\n\t\t\t\t\t\t\t\t\t\t\tevents.map(e => <Event key={e.id} {...e}/>)\r\n\t\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t\t<Segment className='home__not-found' placeholder>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Header icon>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon name='search' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tМы не нашли ничего по вашему запросу {\"    \"} :(\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Header>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Segment.Inline>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize='tiny'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpositive\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.props.clear}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>Очистить фильтры</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Segment.Inline>\r\n\t\t\t\t\t\t\t\t\t\t\t</Segment>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Filters>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = ( state ) => {\r\n\treturn { ...state.home };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tloadData: () => {\r\n\t\t\tdispatch(getInitialData());\r\n\t\t},\r\n\t\tclear: () => {\r\n\t\t\tdispatch(clearFields());\r\n\t\t\tdispatch(getInitialData());\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","import React, { Component } from 'react';\r\nimport { object } from 'prop-types';\r\n\r\nclass LazyLoad extends Component {\r\n\t\r\n\tcomponentWillMount() {\r\n\t\tconst self = this;\r\n\t\tthis.props.load.then(comp => {\r\n\t\t\tself.comp = comp;\r\n\t\t\tself.forceUpdate();\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\tconst Component = this.comp;\r\n\t\treturn Component ? <Component /> : null;\r\n\t}\r\n}\r\n\r\nLazyLoad.propTypes = {\r\n\tload: object\r\n};\r\n\r\nexport default (dynamicImport) => () => (\r\n\t<LazyLoad load={ dynamicImport() } />\r\n);","import Home from '../pages/home';\r\nimport { lazyLoad } from '../enhancers';\r\n\r\nconst routes = [\r\n\t{\r\n\t\tpath: '/',\r\n\t\tcomponent: Home,\r\n\t\texact: true\r\n\t},\r\n\t{\r\n\t\tpath: '/event/details/:permalink',\r\n\t\tcomponent: lazyLoad(() => new Promise((resolve, reject) => {\r\n\t\t\tresolve(require('../pages/details-event').default)\r\n\t\t})),\r\n\t\texact: true\r\n\t},\r\n\t{\r\n\t\tpath: '/event/edit/:permalink',\r\n\t\tcomponent: lazyLoad(() => new Promise((resolve, reject) => {\r\n\t\t\tresolve(require('../pages/event').default)\r\n\t\t})),\r\n\t\texact: true\r\n\t},\r\n\t{\tpath: '/event/new',\r\n\t\tcomponent: lazyLoad(() => new Promise((resolve, reject) => {\r\n\t\t\tresolve(require('../pages/event').default)\r\n\t\t})),\r\n\t\texact: true\r\n\t}\r\n];\r\n\r\nexport default routes;","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport routes from './routes';\r\n\r\nconst App = () => (\r\n\t<div>\r\n\t\t{ routes.map(route => (\r\n\t\t\t<Route key={ route.path } { ...route } />\r\n\t\t)) }\r\n\t</div>\r\n);\r\n\r\nexport default App;","import 'core-js/features/set';\r\nimport 'core-js/features/map';\r\n\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { HashRouter as Router } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport App from './ui/app';\r\nimport configureStore from './store';\r\nimport './css/material.font.css';\r\nimport './css/material.min.css';\r\nimport './css/global.css';\r\n\r\nimport 'semantic-ui-css/semantic.min.css';\r\n\r\nconst store = configureStore();\r\n\r\nconst render = () => (\r\n\t<Provider store={store}>\r\n\t\t<Router>\r\n\t\t\t<App />\r\n\t\t</Router>\r\n\t</Provider>\r\n);\r\n\r\nReactDOM.render(render(), document.getElementById('root'));\r\n\r\n\r\n","import { constants } from './filtersActions';\r\nimport { constants as homeConstatns } from '../homeActions';\r\n\r\nconst initialState = {\r\n\tsearch: '',\r\n\tpage: 1,\r\n\tpagesCount: 1,\r\n\tstatus: 'all',\r\n\tsubject: 'all',\r\n\tcity: 'all',\r\n\taffilation: 'all',\r\n\tui: {\r\n\t\tisLoading: false\r\n\t}\r\n}\r\n\r\nexport default function reducer(state = initialState, action) {\r\n\tswitch(action.type) {\r\n\r\n\t\tcase homeConstatns.GET_INITIAL_DATA_SUCCESS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpagesCount: action.payload.pagesCount\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.CLEAR_FIELDS: {\r\n\t\t\treturn {\r\n\t\t\t\t...initialState\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.CHANGE_SEARCH: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsearch: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.CHANGE_PAGE: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpage: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.CHANGE_STATUS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tstatus: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.CHANGE_SUBJECT: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsubject: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.CHANGE_CITY: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcity: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.CHANGE_AFFILATION: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\taffilation: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdefault: return state;\r\n\t}\r\n}","import { constants } from './homeActions';\r\nimport { combineReducers } from 'redux';\r\nimport filtersReducer from './filters/reducer';\r\n\r\nfunction statusReducer(state=[], action){\r\n\tswitch(action.type) {\r\n\r\n\t\tcase constants.GET_INITIAL_DATA_SUCCESS: {\r\n\t\t\tlet { status_list } = action.payload;\r\n\r\n\t\t\tstatus_list = status_list.map(s => ({\r\n\t\t\t\ttext: s.title,\r\n\t\t\t\tvalue: s.id,\r\n\t\t\t\t...s\r\n\t\t\t}));\r\n\t\t\treturn [{\r\n\t\t\t\t\tvalue: 'all',\r\n\t\t\t\t\ttext: 'Выберите статус',\r\n\t\t\t\t\troles: ['admin', 'event_admin', 'user']\r\n\t\t\t\t}, \r\n\t\t\t\t...status_list\r\n\t\t\t]\r\n\t\t}\r\n\t\tdefault: return state;\r\n\t}\r\n}\r\n\r\nfunction citiesReducer(state=[], action){\r\n\tswitch(action.type) {\r\n\r\n\t\tcase constants.GET_INITIAL_DATA_SUCCESS: {\r\n\t\t\tlet { cities } = action.payload;\r\n\r\n\t\t\tcities = cities.map(c => ({\r\n\t\t\t\ttext: c.name,\r\n\t\t\t\tvalue: c.id\r\n\t\t\t}));\r\n\t\t\treturn [{\r\n\t\t\t\t\tvalue: 'all',\r\n\t\t\t\t\ttext: 'Выберите город'\r\n\t\t\t\t}, \r\n\t\t\t\t...cities\r\n\t\t\t]\r\n\t\t}\r\n\t\tdefault: return state;\r\n\t}\r\n}\r\n\r\nfunction affilationsReducer(state=[], action){\r\n\tswitch(action.type) {\r\n\r\n\t\tcase constants.GET_INITIAL_DATA_SUCCESS: {\r\n\t\t\tlet { filter_list } = action.payload;\r\n\r\n\t\t\tconst affilations = filter_list.map(a => ({\r\n\t\t\t\ttext: a.title,\r\n\t\t\t\tvalue: a.id\r\n\t\t\t}));\r\n\t\t\treturn affilations;\r\n\t\t}\r\n\t\tdefault: return state;\r\n\t}\r\n}\r\n\r\nfunction subjectsReducer(state=[], action){\r\n\tswitch(action.type) {\r\n\r\n\t\tcase constants.GET_INITIAL_DATA_SUCCESS: {\r\n\t\t\tlet { subjects } = action.payload;\r\n\r\n\t\t\tsubjects = subjects.map(s => ({\r\n\t\t\t\ttext: s,\r\n\t\t\t\tvalue: s\r\n\t\t\t}));\r\n\t\t\treturn [{\r\n\t\t\t\t\tvalue: 'all',\r\n\t\t\t\t\ttext: 'Выберите тематику'\r\n\t\t\t\t}, \r\n\t\t\t\t...subjects\r\n\t\t\t]\r\n\t\t}\r\n\t\tdefault: return state;\r\n\t}\r\n}\r\n\r\nfunction userReducer(state={}, action){\r\n\tswitch(action.type) {\r\n\t\tcase constants.GET_INITIAL_DATA_SUCCESS: {\r\n\t\t\tconst { cur_user_id, user_role } = action.payload;\r\n\t\t\treturn {\r\n\t\t\t\tcur_user_id,\r\n\t\t\t\tuser_role\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdefault: return state;\r\n\t}\r\n}\r\n\r\nfunction eventsReducer(state=[], action){\r\n\tswitch(action.type) {\r\n\r\n\t\tcase constants.GET_INITIAL_DATA_SUCCESS: {\r\n\t\t\treturn action.payload.events;\r\n\t\t}\r\n\r\n\t\tdefault: return state;\r\n\t}\r\n}\r\n\r\nfunction loadingReducer(state = false, action){\r\n\tswitch(action.type) {\r\n\r\n\t\tcase constants.INITIAL_LOADING: {\r\n\t\t\treturn action.payload;\r\n\t\t}\r\n\r\n\t\tdefault: return state;\r\n\t}\r\n}\r\n\r\nconst reducer = combineReducers({\r\n\tuser: userReducer,\r\n\tcities: citiesReducer,\r\n\taffilations: affilationsReducer,\r\n\tsubjects: subjectsReducer,\r\n\tstatuses: statusReducer,\r\n\tevents: eventsReducer,\r\n\tui: combineReducers({\r\n\t\tfilters: filtersReducer,\r\n\t\tisLoading: loadingReducer\r\n\t})\r\n});\r\n\r\nexport default reducer;","import { constants } from './eventActions';\r\n\r\nfunction uiReducer(state = {\r\n\tisLoading: false\r\n}, action){\r\n\tswitch(action.type) {\r\n\r\n\t\tcase constants.NEW_EVENT_LOADING: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisLoading: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdefault: return state;\r\n\t}\r\n}\r\n\r\nexport default function eventNewReducer(state = {\r\n\tid: '',\r\n\ttitle: '',\r\n\tlong_desc: '',\r\n\tshort_desc: '',\r\n\tstart_date: new Date(),\r\n\tfinish_date: new Date(),\r\n\tcity: '',\r\n\tcity_id: '',\r\n\taddress: '',\r\n\tsubject_id: '',\r\n\tmax_person_count: 0,\r\n\tcost: 0,\r\n\tcities: [],\r\n\tsubjects: [],\r\n\timg: '',\r\n\timg_name: '',\r\n\tprevFileId: '',\r\n\tui: {\r\n\t\tisLoading: false\r\n\t}\r\n}, action){\r\n\tswitch(action.type) {\r\n\r\n\t\tcase constants.GET_EVENT_CREATE_SUCCESS: {\r\n\t\t\tlet { cities, subjects } = action.payload;\r\n\t\t\tcities = cities.map(c => ({\r\n\t\t\t\ttext: c.name,\r\n\t\t\t\tvalue: c.id\r\n\t\t\t}));\r\n\r\n\t\t\tsubjects = subjects.map(s => ({\r\n\t\t\t\ttext: s,\r\n\t\t\t\tvalue: s\r\n\t\t\t}));\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload,\r\n\t\t\t\tprevFileId: action.payload.img ? \r\n\t\t\t\t\taction.payload.img.substring(action.payload.img.lastIndexOf('=') + 1, action.payload.img.length) : '',\r\n\t\t\t\tstart_date: action.payload.start_date ? new Date(action.payload.start_date): new Date(),\r\n\t\t\t\tfinish_date: action.payload.finish_date ? new Date(action.payload.finish_date): new Date(),\r\n\t\t\t\tcities,\r\n\t\t\t\tsubjects\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.NEW_EVENT_CHANGE_FILE_NAME: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\timg_name: action.payload,\r\n\t\t\t\tprevFileId: ''\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.NEW_EVENT_CHANGE_TITLE: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttitle: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.NEW_EVENT_CHANGE_DESCRIPTION: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tlong_desc: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.NEW_EVENT_CHANGE_SHORT_DESCRIPTION: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tshort_desc: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.NEW_EVENT_CHANGE_START_DATE: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tstart_date: action.payload\r\n\t\t\t}\t\r\n\t\t}\r\n\r\n\t\tcase constants.NEW_EVENT_CHANGE_FINISH_DATE: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tfinish_date: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.NEW_EVENT_CHANGE_CITY: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcity_id: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.NEW_EVENT_CHANGE_ADDRESS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\taddress: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.NEW_EVENT_CHANGE_SUBJECT: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsubject_id: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.NEW_EVENT_CHANGE_MAX_PERSONS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmax_person_count: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.NEW_EVENT_CHANGE_COST: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcost: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.NEW_EVENT_LOADING: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tui: uiReducer(state.ui, action)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdefault: return state;\r\n\t}\r\n}","import { constants } from './eventDetailsActions';\r\nimport { combineReducers } from 'redux';\r\n\r\nfunction commentsReducer(state=[], action){\r\n\tswitch(action.type){\r\n\t\tcase constants.REMOVE_EVENT_DETAILS_COMMENT_SUCCESS: {\r\n\t\t\treturn state.filter(c => c.id !== action.payload.commentId);\r\n\t\t}\r\n\r\n\t\tcase constants.ADD_EVENT_DETAILS_COMMENT_SUCCESS: {\r\n\t\t\treturn state.concat([ {\r\n\t\t\t\t...action.payload\r\n\t\t\t} ])\r\n\t\t}\r\n\r\n\t\tcase constants.EDIT_EVENT_DETAILS_COMMENT_SUCCESS: {\r\n\t\t\treturn state.map(c => {\r\n\t\t\t\t\tif (c.id === action.payload.commentId){\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...c,\r\n\t\t\t\t\t\t\tmessage: action.payload.message\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn c;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tdefault: return state;\r\n\t}\r\n}\r\n\r\nfunction collaboratorsReducer(state=[], action) {\r\n\tswitch (action.type) {\r\n\t\tcase constants.SET_EVENT_DETAILS_PARTICIPANT_STATUS_SUCCESS: {\r\n\t\t\tif (action.payload.isConfirm){\r\n\t\t\t\treturn state.map(c => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...c,\r\n\t\t\t\t\t\tis_confirm: c.id == action.payload.userId ? true : c.is_confirm\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treturn state.filter(c => {\r\n\t\t\t\t\treturn c.id != action.payload.userId\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.RESPOND_EVENT_DETAILS_PARTICIPANT_SUCCESS: {\r\n\t\t\treturn state.concat([action.payload]);\r\n\t\t}\r\n\r\n\t\tcase constants.REFUSE_EVENT_DETAILS_PARTICIPANT_SUCCESS: {\r\n\t\t\treturn state.filter(c => c.id !== action.payload.id);\r\n\t\t}\r\n\t\t\r\n\t\tdefault: return state;\r\n\t}\r\n}\r\n\r\nfunction uiReducer(state = {\r\n\tisLoading: false\r\n}, action){\r\n\tswitch(action.type) {\r\n\r\n\t\tcase constants.EVENT_DETAILS_LOADING: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisLoading: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdefault: return state;\r\n\t}\r\n}\r\n\r\nexport default function eventDetailsReducer(state={\r\n\tcollaborators: [],\r\n\tcomments: [],\r\n\tadmins: [],\r\n\tui: {\r\n\t\tisLoading: false\r\n\t}\r\n}, action){\r\n\tswitch(action.type) {\r\n\r\n\t\tcase constants.GET_EVENT_DETAILS_INITIAL_DATA_SUCCESS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.EVENT_DETAILS_SET_STATUS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tstatus_id: action.payload.status_id,\r\n\t\t\t\tstatus_name: action.payload.status_name\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.REFUSE_EVENT_DETAILS_PARTICIPANT_SUCCESS:\r\n\t\tcase constants.RESPOND_EVENT_DETAILS_PARTICIPANT_SUCCESS:\r\n\t\tcase constants.SET_EVENT_DETAILS_PARTICIPANT_STATUS_SUCCESS: {\r\n\r\n\t\t\tconst newState = {\r\n\t\t\t\t...state,\r\n\t\t\t\tcollaborators: collaboratorsReducer(state.collaborators, action)\r\n\t\t\t}\r\n\r\n\t\t\treturn newState;\r\n\t\t}\r\n\r\n\t\tcase constants.REMOVE_EVENT_DETAILS_COMMENT_SUCCESS:\r\n\t\tcase constants.ADD_EVENT_DETAILS_COMMENT_SUCCESS:\r\n\t\tcase constants.EDIT_EVENT_DETAILS_COMMENT_SUCCESS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcomments: commentsReducer(state.comments, action) \r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase constants.EVENT_DETAILS_LOADING: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tui: uiReducer(state.ui, action)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault: return state;\r\n\t}\r\n}","import { combineReducers } from 'redux';\r\nimport homeReducer from './pages/home/reducer';\r\nimport eventReducer from './pages/event/eventReducer';\r\nimport eventDetailsReducer from './pages/details-event/eventDetailsReducer';\r\n\r\nconst reducer = combineReducers({\r\n\thome: homeReducer,\r\n\tevent: eventReducer,\r\n\teventDetails: eventDetailsReducer\r\n});\r\n\r\nexport default reducer;\r\n\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport reducers from '../ui/rootReducer';\r\n\r\nexport default function configureStore(){\r\n\tconst store = createStore(reducers, applyMiddleware(thunkMiddleware));\r\n\treturn store;\r\n}","export default function formateDate(date){\r\n\treturn date\r\n\t\t.toLocaleDateString(\r\n\t\t\t'ru-RU',\r\n\t\t\t{ year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric'}\r\n\t\t);\r\n}","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n\tgetEventDetails,\r\n\tsetParticipiantStatus,\r\n\tremoveComment,\r\n\taddComment,\r\n\teditComment,\r\n\trespondParticipiant,\r\n\trefuseParticipiant,\r\n\tresolveEvent,\r\n\trejectEvent,\r\n\tcompleteEvent\r\n} from './eventDetailsActions';\r\nimport {\r\n\tIcon,\r\n\tSegment,\r\n\tHeader,\r\n\tItem,\r\n\tImage,\r\n\tGrid,\r\n\tCard,\r\n\tList,\r\n\tButton,\r\n\tComment,\r\n\tForm,\r\n\tDimmer,\r\n\tLoader,\r\n\tDropdown,\r\n\tLabel\r\n} from 'semantic-ui-react';\r\nimport formatDate from '../../utils/formatDate';\r\nimport toBoolean from '../../utils/toBoolean';\r\nimport { find } from 'lodash';\r\n\r\nimport './event-details.css';\r\n\r\nclass EventDetails extends Component {\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tcomment: '',\r\n\t\t\tisEditCommentNow: false\r\n\t\t}\r\n\r\n\t\tthis.handleChangeNewComment = this.handleChangeNewComment.bind(this);\r\n\t\tthis.handleSubmitNewComment = this.handleSubmitNewComment.bind(this);\r\n\t\tthis.handleChangeComment = this.handleChangeComment.bind(this);\r\n\t\tthis.handleSubmitComment = this.handleSubmitComment.bind(this);\r\n\t\tthis.handeShowEditCommentForm = this.handeShowEditCommentForm.bind(this);\r\n\t\tthis.handleCancelEditComment = this.handleCancelEditComment.bind(this);\r\n\t}\r\n\r\n\thandleChangeNewComment(e, { name, value }) {\r\n\t\tthis.setState({\r\n\t\t\t[name]: value\r\n\t\t});\r\n\t}\r\n\r\n\thandeShowEditCommentForm(commentId, message) {\r\n\t\tthis.setState({\r\n\t\t\t[`comment_${commentId}`]: true,\r\n\t\t\t[`commentValue_${commentId}`]: message,\r\n\t\t\tisEditCommentNow: true\r\n\t\t});\r\n\t}\r\n\r\n\thandleCancelEditComment(e, commentId){\r\n\t\te.preventDefault();\r\n\t\tthis.setState({\r\n\t\t\t[`comment_${commentId}`]: false\r\n\t\t})\r\n\t}\r\n\r\n\thandleChangeComment(e, { name, value }) {\r\n\t\tthis.setState({\r\n\t\t\t[name]: value\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmitComment(e, commentId) {\r\n\t\tconst { submitComment, id } = this.props;\r\n\r\n\t\te.preventDefault();\r\n\t\tsubmitComment(id, commentId, this.state[`commentValue_${commentId}`]);\r\n\t\tthis.setState({\r\n\t\t\t[`comment_${commentId}`]: false,\r\n\t\t\tisEditCommentNow: false\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmitNewComment(e) {\r\n\t\tconst { submitNewComment, id } = this.props;\r\n\r\n\t\te.preventDefault();\r\n\t\tsubmitNewComment(id, this.state.comment);\r\n\t\tthis.setState({\r\n\t\t\tcomment: ''\r\n\t\t});\r\n\t}\r\n\r\n\t_adminButtons(){\r\n\t\tconst { id, status_id, onResolveEvent, onRejectEvent, onCompleteEvent, history, user_role } = this.props;\r\n\t\tconst buttons = [];\r\n\t\tconst isEventAdmin = user_role === 'event_admin';\r\n\t\tconst isAdmin = user_role === 'admin';\r\n\r\n\t\tif (isAdmin || isEventAdmin){\r\n\t\t\tif (status_id === 'project' || status_id === 'plan'){\r\n\t\t\t\tbuttons.push(\r\n\t\t\t\t\t<Button.Group color='teal' className='event-details__reject' key={2}>\r\n\t\t\t\t\t\t<Label style={{\r\n\t\t\t\t\t\t\tborderRadius: '4px 0px 0px 4px',\r\n\t\t\t\t\t\t\tmarginRight: '0',\r\n\t\t\t\t\t\t\tcursor: 'pointer'\r\n\t\t\t\t\t\t}} size='small' color='teal'>\r\n\t\t\t\t\t\t\tСменить статус\r\n\t\t\t\t\t\t</Label>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\tas={Button}\r\n\t\t\t\t\t\t\tclassName='icon'\r\n\t\t\t\t\t\t\tfloating\r\n\t\t\t\t\t\t\ttrigger={<React.Fragment />}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Dropdown.Menu>\r\n\t\t    \t\t\t\t\t<Dropdown.Item text='Отменить' icon='close' onClick={onRejectEvent}/>\r\n\t\t    \t\t\t\t\t{status_id === 'plan' && <Dropdown.Item icon='minus' text='Завершить' onClick={onCompleteEvent}/>}\r\n\t\t    \t\t\t\t</Dropdown.Menu>\r\n\t\t    \t\t\t</Dropdown>\r\n\t    \t\t\t\t\r\n\t    \t\t\t</Button.Group>,\r\n\t\t\t\t\t<Button key={3}\r\n\t\t\t\t\t\tclassName='event-details__reject'\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\tcolor='red'\r\n\t\t\t\t\t\tonClick={() => history.push(`/event/edit/${id}`)}\r\n\t\t\t\t\t\ticon='pencil alternate'\r\n\t\t\t\t\t\tcontent='Редактировать'\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (isAdmin && status_id === 'project'){\r\n\t\t\t\t\tbuttons.push(\r\n\t\t\t\t\t\t<Button key={1}\r\n\t\t\t\t\t\t\tclassName='event-details__resolve'\r\n\t\t\t\t\t\t\tsize='mini'\r\n\t\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\t\tonClick={onResolveEvent}\r\n\t\t\t\t\t\t\ticon='check'\r\n\t\t\t\t\t\t\tcontent='Подтвердить'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn buttons;\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.props.loadEvent();\r\n\t}\r\n\r\n\trender(){\r\n\t\tconst {\r\n\t\t\tui,\r\n\t\t\thistory,\r\n\t\t\tid,\r\n\t\t\tcur_user_id,\r\n\t\t\tadmins,\r\n\t\t\tstatus_id,\r\n\t\t\tstatus_name,\r\n\t\t\ttitle,\r\n\t\t\tlong_desc,\r\n\t\t\timg,\r\n\t\t\tmax_person_count,\r\n\t\t\tcur_person_count,\r\n\t\t\tstart_date,\r\n\t\t\tfinish_date,\r\n\t\t\tcost,\r\n\t\t\tevent_admin_id,\r\n\t\t\tevent_admin_fullname,\r\n\t\t\tevent_admin_avatar,\r\n\t\t\tevent_admin_position,\r\n\t\t\taddress,\r\n\t\t\tlike_count,\r\n\t\t\tcollaborators,\r\n\t\t\tcomments\r\n\t\t} = this.props;\r\n\r\n\t\tconst {\r\n\t\t\tacceptParticipiantStatus,\r\n\t\t\trejectParticipiantStatus,\r\n\t\t\tremoveComment,\r\n\t\t\tonRespondParticipiant,\r\n\t\t\tonRefuseParticipiant\r\n\t\t} = this.props;\r\n\t\tconst { comment, isEditCommentNow } = this.state;\r\n\r\n\t\tconst styles = img ? { backgroundImage: `url(${img})` } : {};\r\n\r\n\t\tif (ui.isLoading){\r\n\t\t\treturn (\r\n\t\t\t\t<Dimmer active inverted>\r\n\t\t\t\t\t<Loader inverted>Loading</Loader>\r\n\t\t\t\t</Dimmer>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className='event-details'>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName='event-details__back'\r\n\t\t\t\t\tsize='small'\r\n\t\t\t\t\tprimary\r\n\t\t\t\t\ticon\r\n\t\t\t\t\tlabelPosition='left'\r\n\t\t\t\t\tonClick={() => history.push('/')}\r\n\t\t\t\t>\r\n\t\t\t\t\tНазад\r\n\t\t\t\t\t<Icon name='arrow left' />\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button.Group className='event-details__admin-buttons' size='mini'>\r\n\t\t\t\t\t{this._adminButtons()}\r\n\t\t\t\t</Button.Group>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='mdl-layout__header mdl-layout__header--scroll otp-layout__header otp-layout__header--transparent mdl-color--grey-400 mdl-shadow--4dp'\r\n\t\t\t\t\tstyle={styles}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className='mdl-layout__title otp-layout__title'>\r\n\t\t\t\t\t\t<div className='event-details__status'>\r\n\t\t\t\t\t\t\t{status_name}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='otp-layout__title-text mdl-typography--display-1'>\r\n\t\t\t\t\t\t\t<span className='event-details__title'>{title}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='otp-layout__subtitle'>\r\n\t\t\t\t\t\t\tС {formatDate(new Date(start_date))} по {formatDate(new Date(finish_date))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Segment basic>\r\n\t\t\t\t\t<Grid>\r\n\t\t\t\t\t\t<Grid.Row>\r\n\t\t\t\t\t\t\t<Grid.Column width={8}>\r\n\t\t\t\t\t\t\t\t<Header as='h2' dividing>Описание</Header>\r\n\t\t\t\t\t\t\t\t<Card fluid>\r\n\t\t\t\t\t\t\t\t\t<Card.Content>\r\n\t\t\t\t\t\t\t\t\t\t<Image avatar floated='left' size='massive' src={event_admin_avatar} />\r\n\t\t\t\t\t\t\t\t\t\t<Card.Header>{event_admin_fullname}</Card.Header>\r\n\t\t\t\t\t\t\t\t\t\t<Card.Meta>{event_admin_position}</Card.Meta>\r\n\t\t\t\t\t\t\t\t\t\t<Card.Description>\r\n\t\t\t\t\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{__html: long_desc}} />\r\n\t\t\t\t\t\t\t\t\t\t</Card.Description>\r\n\t\t\t\t\t\t\t\t\t</Card.Content>\r\n\t\t\t\t\t\t\t\t\t<Card.Content extra>\r\n\t\t\t\t\t\t\t\t\t{cost ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon name='ruble sign' color='grey'/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{cost}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<span>Стоимость не указана</span>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t{status_id === 'plan' && \r\n\t\t\t\t\t\t\t\t\t\t(find(collaborators, { id: cur_user_id }) ?\r\n\t\t\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\t\t \t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfloated='right'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='tiny'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbasic\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='red'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={onRefuseParticipiant}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tОтказаться\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t \t<span>{(collaborators.length < max_person_count || max_person_count === 0) && <Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfloated='right'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='tiny'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbasic\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='blue'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={onRespondParticipiant}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tОткликнуться\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</Card.Content>\r\n\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t\t<Grid.Column width={8}>\r\n\t\t\t\t\t\t\t\t<Header as='h2' dividing>Участники ({collaborators.length} / {max_person_count})</Header>\r\n\t\t\t\t\t\t\t\t<List divided verticalAlign='middle'>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tcollaborators.map((c, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<List.Item key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{(event_admin_id === cur_user_id && status_id === 'plan') ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<List.Content floated='right'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!toBoolean(c.is_confirm) ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button.Group size='mini'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon='add'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='green'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => acceptParticipiantStatus(c.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button.Or text=' | '/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon='minus'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='red'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => rejectParticipiantStatus(c.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button.Group>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t): (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon name='check' color='green' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</List.Content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t): (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<List.Content floated='right'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{toBoolean(c.is_confirm) ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon name='check' color='green' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t): (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>На утверждении</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</List.Content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Image avatar src={c.avatar} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<List.Content>{c.fullname}</List.Content>\r\n\t\t\t\t\t\t\t\t\t\t\t</List.Item>\r\n\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t</Grid.Row>\r\n\t\t\t\t\t\t<Grid.Row>\r\n\t\t\t\t\t\t\t<Grid.Column with={16}>\r\n\t\t\t\t\t\t\t\t<Comment.Group>\r\n\t\t\t\t\t\t\t\t\t<Header as='h3' dividing>\r\n\t\t\t\t\t\t\t\t\t\tКомментарии\r\n\t\t\t\t\t\t\t\t\t</Header>\r\n\t\t\t\t\t\t\t\t\t{comments.map(c => (\r\n\t\t\t\t\t\t\t\t\t\t<div key={c.id} className='event-details__comment'>\r\n\t\t\t\t\t\t\t\t\t\t\t{!this.state[`comment_${c.id}`] ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Comment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Comment.Avatar src={c.avatar} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Comment.Content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Comment.Author href='/test' as='a'>{c.user_fullname}</Comment.Author>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Comment.Metadata>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>{formatDate(new Date(c.date))}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Comment.Metadata>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Comment.Text>{c.message}</Comment.Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(cur_user_id === c.user_id && status_id === 'plan') &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Comment.Actions>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Comment.Action onClick={() => this.handeShowEditCommentForm(c.id, c.message)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon name='pencil' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tРедактировать\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Comment.Action>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Comment.Action onClick={() => removeComment(id, c.id)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon name='remove' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tУдалить\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Comment.Action>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Comment.Actions>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Comment.Content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Comment>\r\n\t\t\t\t\t\t\t\t\t\t\t): (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Form className='event-details__form' reply onSubmit={(e) => this.handleSubmitComment(e, c.id)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Form.TextArea\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`commentValue_${c.id}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state[`commentValue_${c.id}`]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChangeComment}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize='mini'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent='Отменить'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabelPosition='left'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon= 'remove'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsecondary\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfloated='right'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => this.handleCancelEditComment(e, c.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize='mini'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent='Cохранить'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabelPosition='left'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon= 'edit'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfloated='right'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t{!isEditCommentNow && <Form reply onSubmit={this.handleSubmitNewComment}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.TextArea name='comment' value={comment} onChange={this.handleChangeNewComment}/>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tsize='tiny'\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={comment.trim() === ''}\r\n\t\t\t\t\t\t\t\t\t\t\tcontent='Добавить комментарий'\r\n\t\t\t\t\t\t\t\t\t\t\tlabelPosition='left'\r\n\t\t\t\t\t\t\t\t\t\t\ticon='edit'\r\n\t\t\t\t\t\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\t\t\t\t\t\tfloated='right'\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Form>}\r\n\t\t\t\t\t\t\t\t\t</Comment.Group>\r\n\t\t\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t\t</Grid.Row>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Segment>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn state.eventDetails;\r\n};\r\n\r\nconst mapDispatchProps = (dispatch, ownProps) => {\r\n\tconst { match } = ownProps;\r\n\treturn {\r\n\t\tloadEvent: () => dispatch(getEventDetails(match.params.permalink)),\r\n\t\tacceptParticipiantStatus: (userId) => dispatch(setParticipiantStatus(userId, true)),\r\n\t\trejectParticipiantStatus: (userId) => dispatch(setParticipiantStatus(userId, false)),\r\n\t\tremoveComment: (eventId, commentId) => dispatch(removeComment(eventId, commentId)),\r\n\t\tsubmitNewComment: (eventId, message) => dispatch(addComment(eventId, message)),\r\n\t\tsubmitComment: (eventId, commentId, message) => dispatch(editComment(eventId, commentId, message)),\r\n\t\tonRespondParticipiant: () => dispatch(respondParticipiant()),\r\n\t\tonRefuseParticipiant: () => dispatch(refuseParticipiant()),\r\n\t\tonResolveEvent: () => dispatch(resolveEvent()),\r\n\t\tonRejectEvent: () => dispatch(rejectEvent()),\r\n\t\tonCompleteEvent: () => dispatch(completeEvent())\r\n\t}\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchProps)(EventDetails));","export { default } from './eventDetails';"],"sourceRoot":""}